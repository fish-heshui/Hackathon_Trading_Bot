import{_ as G}from"./plus-box-outline-DggSO52U.js";import{d as H,aU as Q,a4 as K,c as _,a as h,e as M,b as m,F as W,m as X,s as Y,g as Z,h as I,B as ee,H as te,Q as ae,u as ne,r as i,R as E,S as N,j as x,U as oe,cF as d,b_ as se,C as V}from"./index-D1nGKoiE.js";var C=(n=>(n.string="string",n.number="number",n.boolean="boolean",n.option="option",n.list="list",n))(C||{});const le={class:"flex flex-row gap-2"},ie={class:"flex gap-1 flex-col w-full"},fe=H({__name:"BaseStringList",props:Q({placeholder:{default:""},size:{default:"small"}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const l=K(n,"modelValue");return(b,f)=>{const g=Y,p=ee,r=Z,a=G;return h(),_("div",le,[M("div",ie,[(h(!0),_(W,null,X(l.value,(o,u)=>(h(),_("div",{key:u,class:"flex flex-row gap-1"},[m(g,{modelValue:l.value[u],"onUpdate:modelValue":v=>l.value[u]=v,size:"small",class:"w-full",placeholder:n.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"]),m(r,{severity:"secondary",variant:"outlined",title:"Delete this value.",class:"flex align-items-center justify-content-center",onClick:v=>l.value.splice(u,1)},{icon:I(()=>[m(p)]),_:1},8,["onClick"])]))),128))]),m(r,{title:"Add new value",severity:"secondary",class:"mt-auto flex align-items-center justify-content-center",onClick:f[0]||(f[0]=o=>l.value.push(""))},{icon:I(()=>[m(a)]),_:1})])}}}),re={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ue(n,l){return h(),_("svg",re,[...l[0]||(l[0]=[M("path",{fill:"currentColor",d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"},null,-1)])])}const ve=te({name:"mdi-chevron-up",render:ue}),me=ae("pairlistConfig",()=>{const n=ne(),l=i(!1),b=i(),f=i(n.activeBot?.stakeCurrency??"USDT"),g=i([]),p=i(!1),r=i({exchange:n.activeBot?.botState.exchange??"",trade_mode:{trading_mode:n.activeBot?.botState.trading_mode??E.SPOT,margin_mode:n.activeBot?.botState.trading_mode===E.FUTURES?N.ISOLATED:N.NONE}}),a=i(k()),o=i([]),u=i(""),v=x(()=>!!a.value.pairlists[0]?.is_pairlist_generator),T=x(()=>v.value&&a.value.pairlists.length>0),U=x(()=>JSON.stringify(y(),null,2)),j=e=>o.value.findIndex(t=>t.name===e)>-1;function F(e,t){e=structuredClone(d(e)),e.showParameters=!1,e.id||(e.id=Date.now().toString(36)+Math.random().toString(36).substring(2));for(const s in e.params)e.params[s]&&(e.params[s].value=se(e.params[s].default)?e.params[s].default:"");a.value.pairlists.splice(t,0,e)}function O(e){a.value.pairlists.splice(e,1)}function L(e=""){const t=o.value.findIndex(s=>s.name===a.value.name);a.value.name=e,t>-1?o.value[t]=structuredClone(d(a.value)):o.value.push(structuredClone(d(a.value)))}function B(e){const t=k({name:e});o.value.push(t),a.value=structuredClone(t)}function R(e=""){const t=k({name:e,pairlists:d(a.value.pairlists),blacklist:d(a.value.blacklist)});o.value.push(t),a.value=structuredClone(t)}function $(){const e=o.value.findIndex(t=>t.name===a.value.name);e>-1&&(o.value.splice(e,1),S(o.value.length>0&&o.value[0]?o.value[0].name:"default"))}function S(e){const t=o.value.find(s=>e===s.name);t?a.value=structuredClone(d(t)):B(e)}function k({name:e="",pairlists:t=[],blacklist:s=[]}={}){return{name:e,pairlists:t,blacklist:s}}function D(){a.value.blacklist.push("")}function P(e){a.value.blacklist.splice(e,1)}function z(e){const t=o.value.find(s=>s.name===e);t&&(a.value.blacklist=structuredClone(d(t.blacklist)))}async function A(){const e=q();l.value=!0;try{const{job_id:t}=await n.activeBot.evaluatePairlist(e);console.log("jobId",t),b.value=window.setInterval(async()=>{if(!(await n.activeBot.getBackgroundJobStatus(t)).running){clearInterval(b.value);const c=await n.activeBot.getPairlistEvalResult(t);l.value=!1,c.status==="success"?g.value=c.result.whitelist:c.error&&(V(c.error,"error"),l.value=!1)}},1e3)}catch{V("Evaluation failed","error"),l.value=!1}}function J(e,t){return e===C.number?Number(t):e===C.boolean?!!t:e===C.list?t:String(t)}function q(){const t={pairlists:y(),stake_currency:f.value,blacklist:a.value.blacklist};return p.value&&(console.log("setting custom exchange props"),t.exchange=r.value.exchange,t.trading_mode=r.value.trade_mode.trading_mode,t.margin_mode=r.value.trade_mode.margin_mode),t}function y(){const e=[];return a.value.pairlists.forEach(t=>{const s={method:t.name};for(const c in t.params){const w=t.params[c];w?.value&&(s[c]=J(w.type,w.value))}e.push(s)}),e}return oe(()=>a.value,()=>{u.value=a.value.name},{deep:!0}),{evaluating:l,whitelist:g,config:a,configJSON:U,savedConfigs:o,configName:u,startPairlistEvaluation:A,addToConfig:F,removeFromConfig:O,saveConfig:L,duplicateConfig:R,deleteConfig:$,newConfig:B,selectOrCreateConfig:S,addToBlacklist:D,removeFromBlacklist:P,duplicateBlacklist:z,isSavedConfig:j,firstPairlistIsGenerator:v,pairlistValid:T,stakeCurrency:f,customExchange:p,selectedExchange:r}},{persist:{key:"ftPairlistConfig",pick:["savedConfigs","configName"]}});export{C as P,fe as _,ve as a,me as u};
//# sourceMappingURL=pairlistConfig-Dfuwnjnw.js.map
