import{c as O,s as te,a as oe,_ as se,b as ne}from"./index-hZriSoxw.js";import{_ as le}from"./check-circle-nWKW65dn.js";import{d as k,c5 as ae,c as f,a as l,e as i,f as e,k as v,l as m,z as V,aU as D,a4 as G,M as ie,s as F,W as L,j as M,b as c,_ as j,a2 as re,n as z,h as g,F as E,m as N,Y as J,r as B,a5 as W,i as q,g as R,x as T,H as Y,u as ce,o as ue,U as de,c6 as me,t as K}from"./index-D1nGKoiE.js";import{s as pe}from"./index-yJSdiZHo.js";import{P,_ as _e,u as I,a as fe}from"./pairlistConfig-Dfuwnjnw.js";import{_ as ge,u as H,m as ve}from"./useSortable-jtnNPDb0-BfHASNqJ.js";import{s as xe}from"./index-1Vs0OFBA.js";import{_ as be}from"./ExchangeSelect.vue_vue_type_script_setup_true_lang-BhtgCjO-.js";import"./check-DEKslqbd.js";import"./plus-box-outline-DggSO52U.js";import"./index-B2wo9FRq.js";const ye={class:"relative group copy-container"},Ve={key:0,class:"text-sm"},Ce={class:"text-start border rounded-sm border-surface-500 p-2 m-0 bg-surface-50 dark:bg-surface-900 overflow-auto"},ke=k({__name:"CopyableTextfield",props:{content:{},isValid:{type:Boolean,default:!0}},setup(r){const{copy:o,isSupported:t,copied:n}=ae();return(p,u)=>{const d=le,x=O;return l(),f("div",ye,[i("div",{class:"absolute right-2 top-2 opacity-0 group-hover:opacity-100 transition-opacity hover:cursor-pointer flex dark:bg-surface-700 bg-surface-200 p-1 rounded-sm items-center justify-center flex-row",onClick:u[0]||(u[0]=s=>e(o)(typeof r.content=="string"?r.content:JSON.stringify(r.content)))},[e(n)?(l(),f("span",Ve,"Copied!")):v("",!0),e(t)&&e(n)?(l(),m(d,{key:1})):v("",!0),!e(n)&&e(t)&&r.isValid?(l(),m(x,{key:2})):v("",!0)]),i("pre",Ce,[i("code",null,V(r.content),1)])])}}}),we={class:"pb-1 flex flex-row text-start"},he={class:"w-2/5"},$e={class:"flex flex-col w-full"},Pe={class:"text-muted text-sm text-surface-500"},Be=k({__name:"PairlistConfigParameter",props:D({param:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const o=G(r,"modelValue");return(t,n)=>{const p=F,u=L,d=ie("BFormSelect"),x=_e;return l(),f("div",we,[i("label",he,V(r.param.description),1),i("div",$e,[r.param.type===e(P).string||r.param.type===e(P).number?(l(),m(p,{key:0,modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=s=>o.value=s),size:"small"},null,8,["modelValue"])):v("",!0),r.param.type===e(P).boolean?(l(),m(u,{key:1,modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=s=>o.value=s)},null,8,["modelValue"])):v("",!0),r.param.type===e(P).option?(l(),m(d,{key:2,modelValue:o.value,"onUpdate:modelValue":n[2]||(n[2]=s=>o.value=s),options:r.param.options},null,8,["modelValue","options"])):v("",!0),r.param.type===e(P).list?(l(),m(x,{key:3,modelValue:o.value,"onUpdate:modelValue":n[3]||(n[3]=s=>o.value=s)},null,8,["modelValue"])):v("",!0),i("span",Pe,V(r.param.help),1)])])}}}),Se={class:"shadow-sm rounded-sm border border-surface-300 dark:border-surface-700"},Ue={class:"flex w-full text-start items-center bg-surface-200 dark:bg-surface-700 p-2 border-b border-surface-300 dark:border-surface-600"},ze={class:"flex grow items-center"},Ee={class:"font-bold"},Ne={class:"text-sm"},Ie={key:0,class:"p-2"},Te=k({__name:"PairlistConfigItem",props:D({index:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const o=I(),t=G(r,"modelValue"),n=M(()=>Object.keys(t.value.params).length>0);function p(){n.value&&(t.value.showParameters=!t.value.showParameters)}return(u,d)=>{const x=ge,s=j,a=re,w=fe,h=Be;return l(),f("div",Se,[i("div",Ue,[i("div",ze,[c(x,{role:"button",class:"handle me-2 ms-2 flex-auto shrink",width:"24",height:"24"}),i("div",{role:"button",class:"flex items-start flex-col user-select-none w-full",onClick:p},[i("span",Ee,V(t.value.name),1),i("span",Ne,V(t.value.description),1)])]),c(s,{role:"button",width:"24",height:"24",class:"mx-2",onClick:d[0]||(d[0]=b=>e(o).removeFromConfig(r.index))}),t.value.showParameters?v("",!0):(l(),m(a,{key:0,class:z([e(n)&&!t.value.showParameters?"visible":"invisible","fs-4"]),role:"button",onClick:p},null,8,["class"])),t.value.showParameters?(l(),m(w,{key:1,class:z([e(n)&&t.value.showParameters?"visible":"invisible","fs-4"]),role:"button",onClick:p},null,8,["class"])):v("",!0)]),c(J,null,{default:g(()=>[t.value.showParameters?(l(),f("div",Ie,[(l(!0),f(E,null,N(t.value.params,(b,$)=>(l(),m(h,{key:$,modelValue:b.value,"onUpdate:modelValue":y=>b.value=y,param:b},null,8,["modelValue","onUpdate:modelValue","param"]))),128))])):v("",!0)]),_:1})])}}}),Fe={class:"flex mb-4 items-center gap-2"},Me=k({__name:"PairlistConfigBlacklist",setup(r){const o=I(),t=B(""),n=M(()=>o.savedConfigs.filter(p=>p.name!==o.config.name).map(p=>p.name));return(p,u)=>{const d=W,x=O,s=R,a=F,w=j,h=oe,b=te,$=xe;return l(),m($,{toggleable:"",header:"Blacklist",collapsed:""},{default:g(()=>[i("div",Fe,[u[3]||(u[3]=i("span",{class:"col-auto"},"Copy from:",-1)),c(d,{modelValue:e(t),"onUpdate:modelValue":u[0]||(u[0]=y=>q(t)?t.value=y:null),size:"small",class:"grow",options:e(n)},null,8,["modelValue","options"]),c(s,{title:"Copy",size:"small",severity:"secondary",onClick:u[1]||(u[1]=y=>e(o).duplicateBlacklist(e(t)))},{icon:g(()=>[c(x)]),_:1})]),(l(!0),f(E,null,N(e(o).config.blacklist,(y,C)=>(l(),m(b,{key:C,class:"mb-2",size:"sm"},{default:g(()=>[c(a,{modelValue:e(o).config.blacklist[C],"onUpdate:modelValue":S=>e(o).config.blacklist[C]=S,size:"small"},null,8,["modelValue","onUpdate:modelValue"]),c(h,null,{default:g(()=>[c(s,{size:"small",severity:"secondary",onClick:S=>e(o).removeFromBlacklist(C)},{icon:g(()=>[c(w)]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),c(s,{size:"small",onClick:u[2]||(u[2]=y=>e(o).addToBlacklist())},{default:g(()=>[...u[4]||(u[4]=[T("Add",-1)])]),_:1})]),_:1})}}}),Re={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ae(r,o){return l(),f("svg",Re,[...o[0]||(o[0]=[i("path",{fill:"currentColor",d:"M15 9H5V5h10m-3 14a3 3 0 0 1-3-3a3 3 0 0 1 3-3a3 3 0 0 1 3 3a3 3 0 0 1-3 3m5-16H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7z"},null,-1)])])}const He=Y({name:"mdi-content-save",render:Ae}),Oe={class:"flex flex-col sm:flex-row mb-2 gap-2"},De={key:1},Ge=k({__name:"PairlistConfigActions",setup(r){const o=I();return(t,n)=>{const p=He,u=R,d=W,x=ne;return l(),f("div",Oe,[c(u,{title:"Save configuration",size:"small",severity:"primary",onClick:n[0]||(n[0]=s=>e(o).saveConfig(e(o).config.name))},{icon:g(()=>[c(p)]),_:1}),c(se,{modelValue:e(o).config.name,"onUpdate:modelValue":n[3]||(n[3]=s=>e(o).config.name=s),"editable-name":"config","allow-add":!0,"allow-duplicate":!0,"allow-edit":!0,class:"flex grow",onDelete:e(o).deleteConfig,onDuplicate:n[4]||(n[4]=(s,a)=>e(o).duplicateConfig(a)),onNew:n[5]||(n[5]=s=>e(o).newConfig(s)),onRename:n[6]||(n[6]=(s,a)=>e(o).saveConfig(a))},{default:g(()=>[c(d,{modelValue:e(o).configName,"onUpdate:modelValue":[n[1]||(n[1]=s=>e(o).configName=s),n[2]||(n[2]=s=>e(o).selectOrCreateConfig(s))],size:"small",class:"w-full text-start",options:e(o).savedConfigs.map(s=>s.name)},null,8,["modelValue","options"])]),_:1},8,["modelValue","onDelete"]),c(u,{title:"Evaluate pairlist",disabled:e(o).evaluating||!e(o).pairlistValid,severity:"primary",class:"px-5",size:"small",onClick:n[7]||(n[7]=s=>e(o).startPairlistEvaluation())},{default:g(()=>[e(o).evaluating?(l(),m(x,{key:0,class:"h-5 w-5"})):(l(),f("span",De,"Evaluate"))]),_:1},8,["disabled"])])}}}),Le={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function je(r,o){return l(),f("svg",Le,[...o[0]||(o[0]=[i("path",{fill:"currentColor",d:"m17 12l-5 5v-3H8v-4h4V7zM3 19V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2m2 0h14V5H5z"},null,-1)])])}const Je=Y({name:"mdi-arrow-right-bold-box-outline",render:je}),We={class:"grid grid-cols-1 lg:grid-cols-[auto_1fr_auto] px-3 mb-3 gap-3 w-full"},qe={class:"flex grow items-start flex-col"},Ye={class:"font-bold"},Ke={class:"text-sm text-muted-color"},Qe={class:"flex flex-col"},Xe={class:"border rounded-sm border-surface-500 p-2 mb-2"},Ze={class:"flex items-center gap-2 my-2"},et={class:"mb-2 border rounded-sm border-surface-500 p-2 text-start"},tt={class:"flex flex-col w-full min-w-72"},ot={class:"relative overflow-auto"},st=k({__name:"PairlistConfigurator",setup(r){const o=ce(),t=I(),n=B([]),p=B(null),u=B(null),d=B("Config"),x=M(()=>t.config.pairlists.length==0);return H(u,n.value,{group:{name:"configurator",pull:"clone",put:!1},sort:!1,filter:".no-drag",dragClass:"dragging"}),H(p,t.config.pairlists,{handle:".handle",group:"configurator",onUpdate:async s=>{ve(t.config.pairlists,s.oldIndex,s.newIndex)},onAdd:s=>{const a=n.value[s.oldIndex];if(!a){console.error("Pairlist not found");return}t.addToConfig(a,s.newIndex),s.clone.replaceWith(s.item),s.clone.remove()}}),ue(async()=>{n.value=(await o.activeBot.getPairlists()).pairlists.sort((s,a)=>s.is_pairlist_generator===a.is_pairlist_generator?s.name.localeCompare(a.name):s.is_pairlist_generator?-1:1),t.selectOrCreateConfig(t.isSavedConfig(t.configName)?t.configName:"default")}),de(()=>t.whitelist,()=>{d.value="Results"}),t.whitelist.length>0&&(d.value="Results"),(s,a)=>{const w=Je,h=R,b=Ge,$=F,y=L,C=be,S=Me,Q=me,X=Te,Z=pe,A=ke;return l(),f("div",We,[i("ul",{ref_key:"availablePairlistsEl",ref:u,class:"divide-y border-x border-surface-500 rounded-sm border-y divide-solid divide-surface-500 min-w-72"},[(l(!0),f(E,null,N(e(n),_=>(l(),f("li",{key:_.name,class:z([{"no-drag text-gray-500 hover:cursor-default":e(t).config.pairlists.length==0&&!_.is_pairlist_generator},"pairlist flex text-start items-center py-2 px-3 hover:cursor-grab"])},[i("div",qe,[i("span",Ye,V(_.name),1),i("span",Ke,V(_.description),1)]),c(h,{severity:"secondary",class:"dark:text-white",variant:"text",disabled:e(t).config.pairlists.length==0&&!_.is_pairlist_generator,onClick:U=>e(t).addToConfig(_,e(t).config.pairlists.length)},{icon:g(()=>[c(w)]),_:1},8,["disabled","onClick"])],2))),128))],512),i("div",Qe,[c(b),i("div",Xe,[i("div",Ze,[a[4]||(a[4]=i("span",{class:"col-auto"},"Stake currency: ",-1)),c($,{modelValue:e(t).stakeCurrency,"onUpdate:modelValue":a[0]||(a[0]=_=>e(t).stakeCurrency=_),size:"small"},null,8,["modelValue"])]),i("div",et,[c(y,{modelValue:e(t).customExchange,"onUpdate:modelValue":a[1]||(a[1]=_=>e(t).customExchange=_),class:"mb-2"},{default:g(()=>[...a[5]||(a[5]=[T(" Custom Exchange ",-1)])]),_:1},8,["modelValue"]),c(J,{name:"fade"},{default:g(()=>[e(t).customExchange?(l(),m(C,{key:0,modelValue:e(t).selectedExchange,"onUpdate:modelValue":a[2]||(a[2]=_=>e(t).selectedExchange=_)},null,8,["modelValue"])):v("",!0)]),_:1})])]),c(S),e(t).config.pairlists.length>0&&!e(t).firstPairlistIsGenerator?(l(),m(Q,{key:0,class:"my-2",severity:"warn"},{default:g(()=>[...a[6]||(a[6]=[T(" First entry in the pairlist must be a Generating pairlist, like StaticPairList or VolumePairList. ",-1)])]),_:1})):v("",!0),i("div",{ref_key:"pairlistConfigsEl",ref:p,class:z(["flex flex-col grow relative border rounded-sm border-surface-500 p-1 gap-2 min-h-32",{empty:e(x)}])},[(l(!0),f(E,null,N(e(t).config.pairlists,(_,U)=>(l(),m(X,{key:_.id,modelValue:e(t).config.pairlists[U],"onUpdate:modelValue":ee=>e(t).config.pairlists[U]=ee,index:U,onRemove:e(t).removeFromConfig},null,8,["modelValue","onUpdate:modelValue","index","onRemove"]))),128))],2)]),i("div",tt,[c(Z,{modelValue:e(d),"onUpdate:modelValue":a[3]||(a[3]=_=>q(d)?d.value=_:null),class:"mb-2",size:"small","allow-empty":!1,"option-label":"value","option-value":"value",options:[{value:"Config"},{value:"Results",disabled:e(t).whitelist.length===0}],"option-disabled":"disabled"},null,8,["modelValue","options"]),i("div",ot,[e(d)==="Config"?(l(),m(A,{key:0,class:"lg:a22bsolute w-full",content:e(t).configJSON,"is-valid":e(t).pairlistValid},null,8,["content","is-valid"])):v("",!0),e(d)==="Results"?(l(),m(A,{key:1,class:"lg:abs22olute w-full",content:e(t).whitelist},null,8,["content"])):v("",!0)])])])}}}),nt=K(st,[["__scopeId","data-v-c134ddd9"]]),lt={};function at(r,o){const t=nt;return l(),m(t,{class:"pt-4"})}const xt=K(lt,[["render",at]]);export{xt as default};
//# sourceMappingURL=PairlistConfigView-C_ZHXJ_E.js.map
