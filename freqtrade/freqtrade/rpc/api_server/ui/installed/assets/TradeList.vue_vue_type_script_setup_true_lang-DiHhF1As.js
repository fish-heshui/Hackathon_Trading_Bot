import{_ as ee,W as le,S as Ae,V as De,v as ze,H as Re,I as Ne,z as He,F as Ue,aY as We,n as ve,j as me,b0 as Ge,q as fe,a4 as ie,bO as je,dA as X,T as qe,R as Z,dB as pe,ce as w,bI as Ke,dC as Qe,a7 as Ye,dD as ye,a9 as be,dE as Xe,dF as Je,a6 as Ze,ao as et,b3 as tt,dG as at,dH as rt}from"./installCanvasRenderer-4trk6N7K.js";import{ad as ot}from"./chartZoom-pugbQQdv.js";import{d as q,aU as he,a4 as ge,u as te,r as C,b9 as nt,l as O,a as _,b2 as ae,h as B,e as x,w as xe,c as M,k as R,f as b,b as h,i as N,s as _e,ba as J,z as L,g as K,x as H,bb as ke,a6 as lt,j as it,E as st,H as Q,bc as Te,B as ut,K as dt,U as ct,aR as vt,F as G,m as mt,D as se,bd as ft}from"./index-D1nGKoiE.js";import{s as Ce}from"./index-CEpCyxkv.js";import{s as Be}from"./index-yJSdiZHo.js";import{s as pt}from"./index-CjZ0zNgp.js";import{s as yt,a as bt}from"./index-BTUVlsjz.js";import{a as ht,_ as gt}from"./InfoBox.vue_vue_type_script_setup_true_lang-BrAeT5j_.js";import{s as xt}from"./index-BBrH4yNu.js";var Ee=(function(e){ee(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],a.visualDrawType="stroke",a}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:le.color.neutral00,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:le.color.shadow}},animationDuration:800},t})(Ae);De(Ee,ot,!0);var _t=(function(e){ee(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n){var o=a.getData(),l=this.group,s=this._data;this._data||l.removeAll();var d=a.get("layout")==="horizontal"?1:0;o.diff(s).add(function(m){if(o.hasValue(m)){var u=o.getItemLayout(m),i=ue(u,o,m,d,!0);o.setItemGraphicEl(m,i),l.add(i)}}).update(function(m,u){var i=s.getItemGraphicEl(u);if(!o.hasValue(m)){l.remove(i);return}var f=o.getItemLayout(m);i?(ze(i),Ve(f,i,o,m)):i=ue(f,o,m,d),l.add(i),o.setItemGraphicEl(m,i)}).remove(function(m){var u=s.getItemGraphicEl(m);u&&l.remove(u)}).execute(),this._data=o},t.prototype.remove=function(a){var r=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(o){o&&r.remove(o)})},t.type="boxplot",t})(Re),kt=(function(){function e(){}return e})(),Tt=(function(e){ee(t,e);function t(a){var r=e.call(this,a)||this;return r.type="boxplotBoxPath",r}return t.prototype.getDefaultShape=function(){return new kt},t.prototype.buildPath=function(a,r){var n=r.points,o=0;for(a.moveTo(n[o][0],n[o][1]),o++;o<4;o++)a.lineTo(n[o][0],n[o][1]);for(a.closePath();o<n.length;o++)a.moveTo(n[o][0],n[o][1]),o++,a.lineTo(n[o][0],n[o][1])},t})(We);function ue(e,t,a,r,n){var o=e.ends,l=new Tt({shape:{points:n?Ct(o,r,e):o}});return Ve(e,l,t,a,n),l}function Ve(e,t,a,r,n){var o=a.hostModel,l=Ne[n?"initProps":"updateProps"];l(t,{shape:{points:e.ends}},o,r),t.useStyle(a.getItemVisual(r,"style")),t.style.strokeNoScale=!0,t.z2=100;var s=a.getItemModel(r),d=s.getModel("emphasis");He(t,s),Ue(t,d.get("focus"),d.get("blurScope"),d.get("disabled"))}function Ct(e,t,a){return ve(e,function(r){return r=r.slice(),r[t]=a.initBaseline,r})}var j=me;function Bt(e){var t=Et(e);j(t,function(a){var r=a.seriesModels;r.length&&(Vt(a),j(r,function(n,o){wt(n,a.boxOffsetList[o],a.boxWidthList[o])}))})}function Et(e){var t=[],a=[];return e.eachSeriesByType("boxplot",function(r){var n=r.getBaseAxis(),o=Ge(a,n);o<0&&(o=a.length,a[o]=n,t[o]={axis:n,seriesModels:[]}),t[o].seriesModels.push(r)}),t}function Vt(e){var t=e.axis,a=e.seriesModels,r=a.length,n=e.boxWidthList=[],o=e.boxOffsetList=[],l=[],s;if(t.type==="category")s=t.getBandWidth();else{var d=0;j(a,function(p){d=Math.max(d,p.getData().count())});var m=t.getExtent();s=Math.abs(m[1]-m[0])/d}j(a,function(p){var c=p.get("boxWidth");fe(c)||(c=[c,c]),l.push([ie(c[0],s)||0,ie(c[1],s)||0])});var u=s*.8-2,i=u/r*.3,f=(u-i*(r-1))/r,g=f/2-u/2;j(a,function(p,c){o.push(g),g+=i+f,n.push(Math.min(Math.max(f,l[c][0]),l[c][1]))})}function wt(e,t,a){var r=e.coordinateSystem,n=e.getData(),o=a/2,l=e.get("layout")==="horizontal"?0:1,s=1-l,d=["x","y"],m=n.mapDimension(d[l]),u=n.mapDimensionsAll(d[s]);if(m==null||u.length<5)return;for(var i=0;i<n.count();i++){var f=n.get(m,i),g=v(f,u[2],i),p=v(f,u[0],i),c=v(f,u[1],i),V=v(f,u[3],i),S=v(f,u[4],i),k=[];D(k,c,!1),D(k,V,!0),k.push(p,c,S,V),F(k,p),F(k,S),F(k,g),n.setItemLayout(i,{initBaseline:g[s],ends:k})}function v(A,z,U){var T=n.get(z,U),W=[];W[l]=A,W[s]=T;var y;return isNaN(A)||isNaN(T)?y=[NaN,NaN]:(y=r.dataToPoint(W),y[l]+=t),y}function D(A,z,U){var T=z.slice(),W=z.slice();T[l]+=o,W[l]-=o,U?A.push(T,W):A.push(W,T)}function F(A,z){var U=z.slice(),T=z.slice();U[l]-=o,T[l]+=o,A.push(U,T)}}function St(e,t){t=t||{};for(var a=[],r=[],n=t.boundIQR,o=n==="none"||n===0,l=0;l<e.length;l++){var s=je(e[l].slice()),d=X(s,.25),m=X(s,.5),u=X(s,.75),i=s[0],f=s[s.length-1],g=(n??1.5)*(u-d),p=o?i:Math.max(i,d-g),c=o?f:Math.min(f,u+g),V=t.itemNameFormatter,S=qe(V)?V({value:l}):Z(V)?V.replace("{value}",l+""):l+"";a.push([S,p,d,m,u,c]);for(var k=0;k<s.length;k++){var v=s[k];if(v<p||v>c){var D=[S,v];r.push(D)}}}return{boxData:a,outliers:r}}var $t={type:"echarts:boxplot",transform:function(t){var a=t.upstream;if(a.sourceFormat!==pe){var r="";w(r)}var n=St(a.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function Pa(e){e.registerSeriesModel(Ee),e.registerChartView(_t),e.registerLayout(Bt),e.registerTransform($t)}var de={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},Ft=(function(){function e(t){var a=this._condVal=Z(t)?new RegExp(t):Je(t)?t:null;if(a==null){var r="";w(r)}}return e.prototype.evaluate=function(t){var a=typeof t;return Z(a)?this._condVal.test(t):Ze(a)?this._condVal.test(t+""):!1},e})(),Pt=(function(){function e(){}return e.prototype.evaluate=function(){return this.value},e})(),Mt=(function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,a=0;a<t.length;a++)if(!t[a].evaluate())return!1;return!0},e})(),Lt=(function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,a=0;a<t.length;a++)if(t[a].evaluate())return!0;return!1},e})(),Ot=(function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e})(),It=(function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,a=this.getValue,r=a(this.valueGetterParam),n=t?this.valueParser(r):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?n:r))return!1;return!0},e})();function re(e,t){if(e===!0||e===!1){var a=new Pt;return a.value=e,a}var r="";return we(e)||w(r),e.and?ce("and",e,t):e.or?ce("or",e,t):e.not?At(e,t):Dt(e,t)}function ce(e,t,a){var r=t[e],n="";fe(r)||w(n),r.length||w(n);var o=e==="and"?new Mt:new Lt;return o.children=ve(r,function(l){return re(l,a)}),o.children.length||w(n),o}function At(e,t){var a=e.not,r="";we(a)||w(r);var n=new Ot;return n.child=re(a,t),n.child||w(r),n}function Dt(e,t){for(var a="",r=t.prepareGetValue(e),n=[],o=Ye(e),l=e.parser,s=l?ye(l):null,d=0;d<o.length;d++){var m=o[d];if(!(m==="parser"||t.valueGetterAttrMap.get(m))){var u=be(de,m)?de[m]:m,i=e[m],f=s?s(i):i,g=Xe(u,f)||u==="reg"&&new Ft(f);g||w(a),n.push(g)}}n.length||w(a);var p=new It;return p.valueGetterParam=r,p.valueParser=s,p.getValue=t.getValue,p.subCondList=n,p}function we(e){return Ke(e)&&!Qe(e)}var zt=(function(){function e(t,a){this._cond=re(t,a)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e})();function Rt(e,t){return new zt(e,t)}var Nt={type:"echarts:filter",transform:function(e){for(var t=e.upstream,a,r=Rt(e.config,{valueGetterAttrMap:et({dimension:!0}),prepareGetValue:function(s){var d="",m=s.dimension;be(s,"dimension")||w(d);var u=t.getDimensionInfo(m);return u||w(d),{dimIdx:u.index}},getValue:function(s){return t.retrieveValueFromItem(a,s.dimIdx)}}),n=[],o=0,l=t.count();o<l;o++)a=t.getRawDataItem(o),r.evaluate()&&n.push(a);return{data:n}}},Ht={type:"echarts:sort",transform:function(e){var t=e.upstream,a=e.config,r="",n=tt(a);n.length||w(r);var o=[];me(n,function(u){var i=u.dimension,f=u.order,g=u.parser,p=u.incomparable;if(i==null&&w(r),f!=="asc"&&f!=="desc"&&w(r),p&&p!=="min"&&p!=="max"){var c="";w(c)}if(f!=="asc"&&f!=="desc"){var V="";w(V)}var S=t.getDimensionInfo(i);S||w(r);var k=g?ye(g):null;g&&!k&&w(r),o.push({dimIdx:S.index,parser:k,comparator:new at(f,p)})});var l=t.sourceFormat;l!==pe&&l!==rt&&w(r);for(var s=[],d=0,m=t.count();d<m;d++)s.push(t.getRawDataItem(d));return s.sort(function(u,i){for(var f=0;f<o.length;f++){var g=o[f],p=t.retrieveValueFromItem(u,g.dimIdx),c=t.retrieveValueFromItem(i,g.dimIdx);g.parser&&(p=g.parser(p),c=g.parser(c));var V=g.comparator.evaluate(p,c);if(V!==0)return V}return 0}),{data:s}}};function Ma(e){e.registerTransform(Nt),e.registerTransform(Ht)}const Ut={key:0},Wt={for:"stake-input",class:"block font-medium mb-1"},Gt={key:1},jt={key:2},qt={class:"flex justify-end gap-2"},Kt=q({__name:"ForceEntryForm",props:he({pair:{default:""},positionIncrease:{type:Boolean,default:!1}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,a=ge(e,"modelValue"),r=te(),n=C(),o=C(""),l=C(void 0),s=C(void 0),d=C(void 0),m=C(""),u=C(nt.long),i=C("force_entry"),f=[{value:"market",text:"Market"},{value:"limit",text:"Limit"}],g=[{value:"long",text:"Long"},{value:"short",text:"Short"}],p=()=>n.value?.checkValidity(),c=async()=>{if(!p())return;const k={pair:o.value};l.value&&(k.price=Number(l.value)),m.value&&(k.ordertype=m.value),s.value&&(k.stakeamount=s.value),r.activeBot.botFeatures.forceEnterShort&&r.activeBot.shortAllowed&&(k.side=u.value),r.activeBot.botFeatures.forceEntryTag&&i.value&&(k.entry_tag=i.value),d.value&&(k.leverage=d.value),r.activeBot.forceentry(k),await ke(),a.value=!1},V=()=>{console.log("resetForm"),o.value=t.pair,l.value=void 0,s.value=void 0,m.value=r.activeBot.botState?.order_types?.forcebuy||r.activeBot.botState?.order_types?.force_entry||r.activeBot.botState?.order_types?.buy||r.activeBot.botState?.order_types?.entry||"limit"},S=()=>{c()};return(k,v)=>{const D=Be,F=_e,A=Ce,z=K,U=ae;return _(),O(U,{visible:a.value,"onUpdate:visible":v[9]||(v[9]=T=>a.value=T),header:e.positionIncrease?`Increasing position for ${e.pair}`:"Force entering a trade",modal:"",onShow:V,onHide:V},{footer:B(()=>[x("div",qt,[h(z,{severity:"secondary",size:"small",onClick:v[8]||(v[8]=T=>a.value=!1)},{default:B(()=>[...v[16]||(v[16]=[H(" Cancel ",-1)])]),_:1}),h(z,{severity:"primary",size:"small",onClick:S},{default:B(()=>[...v[17]||(v[17]=[H(" Enter Position ",-1)])]),_:1})])]),default:B(()=>[x("form",{ref_key:"form",ref:n,class:"space-y-4 md:min-w-[32rem]",onSubmit:xe(c,["prevent"])},[b(r).activeBot.botFeatures.forceEnterShort&&b(r).activeBot.shortAllowed?(_(),M("div",Ut,[v[10]||(v[10]=x("label",{class:"block font-medium mb-1"},"Order direction (Long or Short)",-1)),h(D,{modelValue:b(u),"onUpdate:modelValue":v[0]||(v[0]=T=>N(u)?u.value=T:null),options:g,"allow-empty":!1,"option-label":"text","option-value":"value",size:"small",class:"w-full"},null,8,["modelValue"])])):R("",!0),x("div",null,[v[11]||(v[11]=x("label",{for:"pair-input",class:"block font-medium mb-1"},"Pair",-1)),h(F,{id:"pair-input",modelValue:b(o),"onUpdate:modelValue":v[1]||(v[1]=T=>N(o)?o.value=T:null),disabled:e.positionIncrease,required:"",class:"w-full",onKeydown:J(S,["enter"]),onFocus:v[2]||(v[2]=T=>T.target.select())},null,8,["modelValue","disabled"])]),x("div",null,[v[12]||(v[12]=x("label",{for:"price-input",class:"block font-medium mb-1"},"Price [optional]",-1)),h(A,{id:"price-input",modelValue:b(l),"onUpdate:modelValue":v[3]||(v[3]=T=>N(l)?l.value=T:null),"show-buttons":"",min:0,"max-fraction-digits":8,step:.1,class:"w-full",onKeydown:J(S,["enter"])},null,8,["modelValue"])]),x("div",null,[x("label",Wt,"* Stake-amount in "+L(b(r).activeBot.stakeCurrency)+" [optional]",1),h(A,{id:"stake-input",modelValue:b(s),"onUpdate:modelValue":v[4]||(v[4]=T=>N(s)?s.value=T:null),"show-buttons":"",min:0,step:b(r).activeBot.stakeCurrency==="USDT"?10:1,"max-fraction-digits":5,fluid:""},null,8,["modelValue","step"])]),b(r).activeBot.botFeatures.forceEnterShort&&b(r).activeBot.shortAllowed?(_(),M("div",Gt,[v[13]||(v[13]=x("label",{for:"leverage-input",class:"block font-medium mb-1"},"Leverage to apply [optional]",-1)),h(A,{id:"leverage-input",modelValue:b(d),"onUpdate:modelValue":v[5]||(v[5]=T=>N(d)?d.value=T:null),"show-buttons":"",min:0,step:1,"max-fraction-digits":1,class:"w-full",onKeydown:J(S,["enter"])},null,8,["modelValue"])])):R("",!0),x("div",null,[v[14]||(v[14]=x("label",{class:"block text-sm font-medium mb-1"},"OrderType",-1)),h(D,{modelValue:b(m),"onUpdate:modelValue":v[6]||(v[6]=T=>N(m)?m.value=T:null),options:f,"option-label":"text","option-value":"value",size:"small",class:"w-full"},null,8,["modelValue"])]),b(r).activeBot.botFeatures.forceEntryTag?(_(),M("div",jt,[v[15]||(v[15]=x("label",{for:"enterTag-input",class:"block text-sm font-medium mb-1"},"* Custom entry tag [optional]",-1)),h(F,{id:"enterTag-input",modelValue:b(i),"onUpdate:modelValue":v[7]||(v[7]=T=>N(i)?i.value=T:null),class:"w-full"},null,8,["modelValue"])])):R("",!0)],544)]),_:1},8,["visible","header"])}}}),Qt={class:"mb-4"},Yt={class:"mb-2"},Xt={for:"stake-input",class:"block font-medium mb-1"},Jt={class:"text-sm italic ml-1"},Zt={class:"space-y-2"},ea={class:"flex justify-end gap-2"},ta=q({__name:"ForceExitForm",props:he({trade:{},stakeCurrencyDecimals:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,a=ge(e,"modelValue"),r=te(),n=C(),o=C(void 0),l=C("limit"),s=()=>n.value?.checkValidity();async function d(){if(!s())return;const p={tradeid:String(t.trade.trade_id)};l.value&&(p.ordertype=l.value),o.value&&(p.amount=o.value),await ke(),r.activeBot.forceexit(p),a.value=!1}function m(){o.value=t.trade.amount,l.value=r.activeBot.botState?.order_types?.force_exit||r.activeBot.botState?.order_types?.exit||"limit"}function u(){d()}const i=lt(o,250,{maxWait:500}),f=it(()=>i.value&&t.trade.current_rate?`~${st(i.value*t.trade.current_rate,t.trade.quote_currency||"",t.stakeCurrencyDecimals)} (Estimated value) `:""),g=[{value:"market",text:"Market"},{value:"limit",text:"Limit"}];return(p,c)=>{const V=Ce,S=pt,k=Be,v=K,D=ae;return _(),O(D,{visible:a.value,"onUpdate:visible":c[4]||(c[4]=F=>a.value=F),header:"Force exiting a trade",modal:"",onShow:m,onHide:m},{footer:B(()=>[x("div",ea,[h(v,{severity:"secondary",size:"small",onClick:c[3]||(c[3]=F=>a.value=!1)},{default:B(()=>[...c[7]||(c[7]=[H("Cancel",-1)])]),_:1}),h(v,{severity:"primary",size:"small",onClick:u},{default:B(()=>[...c[8]||(c[8]=[H("Exit Position",-1)])]),_:1})])]),default:B(()=>[x("form",{ref_key:"form",ref:n,class:"space-y-4 md:min-w-[32rem]",onSubmit:xe(d,["prevent"])},[x("div",Qt,[x("p",Yt,[x("span",null,"Exiting Trade #"+L(e.trade.trade_id)+" "+L(e.trade.pair)+".",1),c[5]||(c[5]=x("br",null,null,-1)),x("span",null,"Currently owning "+L(e.trade.amount)+" "+L(e.trade.base_currency),1)])]),x("div",null,[x("label",Xt,[H(" Amount in "+L(e.trade.base_currency)+" [optional] ",1),x("span",Jt,L(f.value),1)]),x("div",Zt,[h(V,{id:"stake-input",modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=F=>o.value=F),min:0,max:e.trade.amount,"use-grouping":!1,step:1e-6,"max-fraction-digits":8,class:"w-full","show-buttons":""},null,8,["modelValue","max"]),h(S,{modelValue:o.value,"onUpdate:modelValue":c[1]||(c[1]=F=>o.value=F),min:0,max:e.trade.amount,step:1e-6,class:"w-full"},null,8,["modelValue","max"])])]),x("div",null,[c[6]||(c[6]=x("label",{class:"block font-medium mb-1"},"*OrderType",-1)),h(k,{modelValue:l.value,"onUpdate:modelValue":c[2]||(c[2]=F=>l.value=F),options:g,"allow-empty":!1,"option-label":"text","option-value":"value",size:"small",class:"w-full"},null,8,["modelValue"])])],544)]),_:1},8,["visible"])}}}),aa={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ra(e,t){return _(),M("svg",aa,[...t[0]||(t[0]=[x("path",{fill:"currentColor",d:"M2 12c0 5 4 9 9 9c2.4 0 4.7-.9 6.4-2.6l-1.5-1.5c-1.3 1.4-3 2.1-4.9 2.1c-6.2 0-9.4-7.5-4.9-11.9S18 5.8 18 12h-3l4 4h.1l3.9-4h-3c0-5-4-9-9-9s-9 4-9 9m8 3h2v2h-2zm0-8h2v6h-2z"},null,-1)])])}const oa=Q({name:"mdi-reload-alert",render:ra}),na={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function la(e,t){return _(),M("svg",na,[...t[0]||(t[0]=[x("path",{fill:"currentColor",d:"M18 11h-3v3h-2v-3h-3V9h3V6h2v3h3m2-5v12H8V4zm0-2H8c-1.1 0-2 .9-2 2v12a2 2 0 0 0 2 2h12c1.11 0 2-.89 2-2V4a2 2 0 0 0-2-2M4 6H2v14a2 2 0 0 0 2 2h14v-2H4z"},null,-1)])])}const ia=Q({name:"mdi-plus-box-multiple-outline",render:la}),sa={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ua(e,t){return _(),M("svg",sa,[...t[0]||(t[0]=[x("path",{fill:"currentColor",d:"M4 20h14v2H4a2 2 0 0 1-2-2V6h2zM20.22 2H7.78C6.8 2 6 2.8 6 3.78v12.44C6 17.2 6.8 18 7.78 18h12.44c.98 0 1.78-.8 1.78-1.78V3.78C22 2.8 21.2 2 20.22 2M19 13.6L17.6 15L14 11.4L10.4 15L9 13.6l3.6-3.6L9 6.4L10.4 5L14 8.6L17.6 5L19 6.4L15.4 10z"},null,-1)])])}const da=Q({name:"mdi-close-box-multiple",render:ua}),ca={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function va(e,t){return _(),M("svg",ca,[...t[0]||(t[0]=[x("path",{fill:"currentColor",d:"M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2m-3.4 14L12 13.4L8.4 17L7 15.6l3.6-3.6L7 8.4L8.4 7l3.6 3.6L15.6 7L17 8.4L13.4 12l3.6 3.6z"},null,-1)])])}const ma=Q({name:"mdi-close-box",render:va}),fa={class:"flex flex-col gap-1"},pa=q({__name:"TradeActions",props:{botFeatures:{},trade:{},enableForceEntry:{type:Boolean,default:!1}},emits:["forceExit","forceExitPartial","cancelOpenOrder","reloadTrade","deleteTrade","forceEntry"],setup(e){return(t,a)=>{const r=ma,n=K,o=da,l=Te,s=ia,d=oa,m=ut;return _(),M("div",fa,[e.botFeatures.forceExitParams?R("",!0):(_(),O(n,{key:0,class:"justify-start!",size:"small",severity:"secondary",title:"Forceexit",label:"Forceexit",onClick:a[0]||(a[0]=u=>t.$emit("forceExit",e.trade))},{icon:B(()=>[h(r)]),_:1})),e.botFeatures.forceExitParams?(_(),O(n,{key:1,size:"small",class:"justify-start!",severity:"secondary",title:"Forceexit limit",label:"Forceexit limit",onClick:a[1]||(a[1]=u=>t.$emit("forceExit",e.trade,"limit"))},{icon:B(()=>[h(r)]),_:1})):R("",!0),e.botFeatures.forceExitParams?(_(),O(n,{key:2,class:"justify-start!",size:"small",severity:"secondary",title:"Forceexit market",label:"Forceexit market",onClick:a[2]||(a[2]=u=>t.$emit("forceExit",e.trade,"market"))},{icon:B(()=>[h(r)]),_:1})):R("",!0),e.botFeatures.forceEntryTag?(_(),O(n,{key:3,class:"justify-start!",size:"small",severity:"secondary",title:"Forceexit partial",label:"Forceexit partial",onClick:a[3]||(a[3]=u=>t.$emit("forceExitPartial",e.trade))},{icon:B(()=>[h(o)]),_:1})):R("",!0),e.botFeatures.cancelOpenOrders&&(e.trade.open_order_id||e.trade.has_open_orders)?(_(),O(n,{key:4,class:"justify-start!",size:"small",severity:"secondary",title:"Cancel open orders",label:"Cancel open orders",onClick:a[4]||(a[4]=u=>t.$emit("cancelOpenOrder",e.trade))},{icon:B(()=>[h(l)]),_:1})):R("",!0),e.enableForceEntry?(_(),O(n,{key:5,class:"justify-start!",size:"small",severity:"secondary",title:"Increase position",label:"Increase position",onClick:a[5]||(a[5]=u=>t.$emit("forceEntry",e.trade))},{icon:B(()=>[h(s)]),_:1})):R("",!0),e.botFeatures.reloadTrade?(_(),O(n,{key:6,class:"justify-start!",size:"small",severity:"secondary",title:"Reload",label:"Reload",onClick:a[6]||(a[6]=u=>t.$emit("reloadTrade",e.trade))},{icon:B(()=>[h(d)]),_:1})):R("",!0),h(n,{class:"justify-start!",size:"small",severity:"secondary",title:"Delete trade",label:"Delete trade",onClick:a[7]||(a[7]=u=>t.$emit("deleteTrade",e.trade))},{icon:B(()=>[h(m)]),_:1})])}}}),ya={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ba(e,t){return _(),M("svg",ya,[...t[0]||(t[0]=[x("path",{fill:"currentColor",d:"M10 9a1 1 0 0 1 1-1a1 1 0 0 1 1 1v4.47l1.21.13l4.94 2.19c.53.24.85.77.85 1.35v4.36c-.03.82-.68 1.47-1.5 1.5H11c-.38 0-.74-.15-1-.43l-4.9-4.2l.74-.77c.19-.21.46-.32.74-.32h.22L10 19zm1-4a4 4 0 0 1 4 4c0 1.5-.8 2.77-2 3.46v-1.22c.61-.55 1-1.35 1-2.24a3 3 0 0 0-3-3a3 3 0 0 0-3 3c0 .89.39 1.69 1 2.24v1.22C7.8 11.77 7 10.5 7 9a4 4 0 0 1 4-4"},null,-1)])])}const ha=Q({name:"mdi-gesture-tap",render:ba}),ga=q({__name:"TradeActionsPopover",props:{trade:{},id:{},botFeatures:{},enableForceEntry:{type:Boolean,default:!1}},emits:["forceExit","forceExitPartial","cancelOpenOrder","reloadTrade","deleteTrade","forceEntry"],setup(e,{emit:t}){const a=t,r=C(!1);function n(i,f=void 0){r.value=!1,a("forceExit",i,f)}function o(i){r.value=!1,a("forceExitPartial",i)}function l(i){r.value=!1,a("cancelOpenOrder",i)}function s(i){r.value=!1,a("reloadTrade",i)}function d(i){r.value=!1,a("deleteTrade",i)}function m(i){r.value=!1,a("forceEntry",i)}const u=C(null);return(i,f)=>{const g=ha,p=K,c=pa,V=Te;return _(),M("div",null,[h(p,{id:`btn-actions-${e.id}`,class:"btn-xs",size:"small",severity:"secondary",title:"Actions",onClick:b(u)?.toggle},{default:B(()=>[h(g)]),_:1},8,["id","onClick"]),h(b(xt),{ref_key:"popover",ref:u,target:`btn-actions-${e.id}`,title:`Actions for ${e.trade.pair}`,triggers:"manual",placement:"left"},{default:B(()=>[h(c,{trade:e.trade,"bot-features":e.botFeatures,"enable-force-entry":e.enableForceEntry,onForceExit:n,onForceExitPartial:o,onDeleteTrade:f[0]||(f[0]=S=>d(e.trade)),onCancelOpenOrder:l,onReloadTrade:s,onForceEntry:m},null,8,["trade","bot-features","enable-force-entry"]),h(p,{class:"mt-1 w-full text-start",size:"small",severity:"secondary",label:"Close Actions menu",onClick:b(u)?.hide},{icon:B(()=>[h(V,{class:"me-1"})]),_:1},8,["onClick"])]),_:1},8,["target","title"])])}}}),xa={class:"h-full overflow-auto w-full"},_a={class:"flex justify-end gap-2 p-2"},La=q({__name:"TradeList",props:{trades:{},title:{default:"Trades"},stakeCurrency:{default:""},activeTrades:{type:Boolean,default:!1},showFilter:{type:Boolean,default:!1},multiBotView:{type:Boolean,default:!1},emptyText:{default:"No Trades to show."}},setup(e){const t=e,a=te(),r=ft(),n=dt(),o=C(1),l=C(),s=C(""),d=C({}),m=t.activeTrades?200:15,u=C(),i=C(!1),f=C(!1),g=C(""),p=C(null),c=C({visible:!1,trade:{}});function V(y){return se(y,a.activeBot.stakeCurrencyDecimals)}const S=C([{field:"trade_id",header:"ID"},{field:"pair",header:"Pair"},{field:"amount",header:"Amount"},t.activeTrades?{field:"stake_amount",header:"Stake amount"}:{field:"max_stake_amount",header:"Total stake amount"},{field:"open_rate",header:"Open rate"},{field:t.activeTrades?"current_rate":"close_rate",header:t.activeTrades?"Current rate":"Close rate"},{field:"profit",header:t.activeTrades?"Current profit %":"Profit %"},{field:"open_timestamp",header:"Open date"},...t.activeTrades?[{field:"actions",header:""}]:[{field:"close_timestamp",header:"Close date"},{field:"exit_reason",header:"Close Reason"}]]);t.multiBotView&&S.value.unshift({field:"botName",header:"Bot"});const k=C(void 0);function v(y,E=void 0){d.value=y,p.value=1,g.value=`Really exit trade ${y.trade_id} (Pair ${y.pair}) using ${E} Order?`,k.value=E,n.confirmDialog===!0?f.value=!0:D()}function D(){if(p.value===0){const y={tradeid:String(d.value.trade_id),botId:d.value.botId};a.deleteTradeMulti(y).catch(E=>console.log(E.response))}if(p.value===1){const y={tradeid:String(d.value.trade_id),botId:d.value.botId};k.value&&(y.ordertype=k.value),a.forceSellMulti(y).then(E=>console.log(E)).catch(E=>console.log(E.response))}if(p.value===3){const y={tradeid:String(d.value.trade_id),botId:d.value.botId};a.cancelOpenOrderMulti(y)}k.value=void 0,f.value=!1}function F(y){g.value=`Really delete trade ${y.trade_id} (Pair ${y.pair})?`,p.value=0,d.value=y,f.value=!0}function A(y){d.value=y,i.value=!0}function z(y){g.value=`Cancel open order for trade ${y.trade_id} (Pair ${y.pair})?`,d.value=y,p.value=3,f.value=!0}function U(y){a.reloadTradeMulti({tradeid:String(y.trade_id),botId:y.botId})}function T(y){c.value.trade=y,c.value.visible=!0}const W=({data:y})=>{t.multiBotView&&a.selectedBot!==y.botId&&a.selectBot(y.botId),y&&y.trade_id!==a.activeBot.detailTradeId?(a.activeBot.setDetailTrade(y),t.multiBotView&&r.push({name:"Freqtrade Trading"})):a.activeBot.setDetailTrade(null)};return ct(()=>a.activeBot.detailTradeId,y=>{t.trades.findIndex(Y=>Y.trade_id===y)<0&&(l.value=void 0)}),(y,E)=>{const Y=ga,Se=ht,oe=gt,$e=bt,Fe=_e,Pe=yt,Me=ta,Le=Kt,ne=K,Oe=ae;return _(),M("div",xa,[h(Pe,{ref_key:"tradesTable",ref:u,selection:b(l),"onUpdate:selection":E[1]||(E[1]=$=>N(l)?l.value=$:null),value:e.trades.filter($=>$.pair.toLowerCase().includes(b(s).toLowerCase())||$.exit_reason?.toLowerCase().includes(b(s).toLowerCase())||$.enter_tag?.toLowerCase().includes(b(s).toLowerCase())),rows:b(m),paginator:!e.activeTrades,first:(b(o)-1)*b(m),"selection-mode":"single",class:"text-center",size:"small",scrollable:!0,"scroll-height":"flex",onRowClick:W},vt({empty:B(()=>[H(L(e.emptyText),1)]),default:B(()=>[(_(!0),M(G,null,mt(b(S),$=>(_(),O($e,{key:$.field,field:$.field,header:$.header},{body:B(({data:P,field:I,index:Ie})=>[I==="trade_id"?(_(),M(G,{key:0},[H(L(P.trade_id)+" "+L(b(a).activeBot.botFeatures.futures&&P.trading_mode!=="spot"?(P.trade_id?"| ":"")+(P.is_short?"Short":"Long"):""),1)],64)):I==="pair"?(_(),M(G,{key:1},[H(L(`${P.pair}${P.open_order_id||P.has_open_orders?"*":""}`),1)],64)):I==="actions"?(_(),O(Y,{key:2,id:Ie,"enable-force-entry":b(a).activeBot.botState.force_entry_enable,trade:P,"bot-features":b(a).activeBot.botFeatures,onDeleteTrade:ka=>F(P),onForceExit:v,onForceExitPartial:A,onCancelOpenOrder:z,onReloadTrade:U,onForceEntry:T},null,8,["id","enable-force-entry","trade","bot-features","onDeleteTrade"])):I==="stake_amount"||I==="max_stake_amount"?(_(),M(G,{key:3},[H(L(V(P[I]))+" "+L(P.trading_mode!=="spot"?`(${P.leverage}x)`:""),1)],64)):I==="open_rate"||I==="current_rate"||I==="close_rate"?(_(),M(G,{key:4},[H(L(("formatPrice"in y?y.formatPrice:b(se))(P[I])),1)],64)):I==="profit"?(_(),O(Se,{key:5,trade:P},null,8,["trade"])):I==="open_timestamp"?(_(),O(oe,{key:6,date:P.open_timestamp},null,8,["date"])):I==="close_timestamp"?(_(),O(oe,{key:7,date:P.close_timestamp??0},null,8,["date"])):(_(),M(G,{key:8},[H(L(P[I]),1)],64))]),_:1},8,["field","header"]))),128))]),_:2},[e.showFilter?{name:"header",fn:B(()=>[x("div",_a,[h(Fe,{modelValue:b(s),"onUpdate:modelValue":E[0]||(E[0]=$=>N(s)?s.value=$:null),placeholder:"Filter",class:"w-64",size:"small"},null,8,["modelValue"])])]),key:"0"}:void 0]),1032,["selection","value","rows","paginator","first"]),e.activeTrades?(_(),O(Me,{key:0,modelValue:b(i),"onUpdate:modelValue":E[2]||(E[2]=$=>N(i)?i.value=$:null),trade:b(d),"stake-currency-decimals":b(a).activeBot.botState.stake_currency_decimals??3},null,8,["modelValue","trade","stake-currency-decimals"])):R("",!0),h(Le,{modelValue:b(c).visible,"onUpdate:modelValue":E[3]||(E[3]=$=>b(c).visible=$),pair:b(c).trade?.pair,"position-increase":""},null,8,["modelValue","pair"]),h(Oe,{visible:b(f),"onUpdate:visible":E[5]||(E[5]=$=>N(f)?f.value=$:null),modal:!0,header:"Exit trade"},{footer:B(()=>[h(ne,{label:"Cancel",onClick:E[4]||(E[4]=$=>f.value=!1)}),h(ne,{label:"Confirm",severity:"danger",onClick:D})]),default:B(()=>[x("p",null,L(b(g)),1)]),_:1},8,["visible"])])}}});export{da as _,ia as a,Kt as b,La as c,Pa as d,Ma as i};
//# sourceMappingURL=TradeList.vue_vue_type_script_setup_true_lang-DiHhF1As.js.map
