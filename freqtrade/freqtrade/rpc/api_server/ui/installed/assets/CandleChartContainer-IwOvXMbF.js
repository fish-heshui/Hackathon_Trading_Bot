import{Z as Ue,ar as Mt,af as at,N as V,c as _,a as x,d as ae,r as T,o as Ke,U as N,e as S,b as v,z as U,a5 as ve,f as a,i as j,g as ye,h as L,_ as rt,H as Lt,as as Pt,$ as dt,at as Vt,au as At,av as Tt,aw as Ze,ax as Dt,ay as $t,az as Ht,aA as Le,M as le,k as $,Y as ut,j as D,aB as ee,aC as Et,l as Z,s as ct,aD as Bt,aE as Ft,aF as zt,aG as Rt,aH as Ut,aI as Kt,ae as jt,aJ as Ie,aK as Xe,ai as Nt,ab as qe,aL as we,aM as Gt,aN as Ye,ao as Pe,aO as Zt,aP as ue,an as Xt,a1 as oe,n as qt,aQ as Yt,aR as Wt,F as ke,m as pt,V as ft,x as G,aS as Jt,aT as Be,aU as Qt,a4 as en,aV as Ce,aW as tn,u as ht,v as nn,W as mt,C as We,t as je,aX as on,aY as ln,G as bt,E as Fe,aZ as Je,a_ as Qe,K as sn,a$ as an,b0 as ce,y as rn,b1 as dn,X as un,b2 as cn}from"./index-D1nGKoiE.js";import{s as gt}from"./index-CEpCyxkv.js";import{s as pn,a as fn,_ as vt,b as hn}from"./index-hZriSoxw.js";import{_ as mn}from"./check-DEKslqbd.js";import{u as bn,s as gn,e as vn,a as yn,b as xn,c as Sn,d as On,i as In}from"./installCanvasRenderer-4trk6N7K.js";import{a as wn,c as kn,b as Cn,h as _n,j as Mn,f as Ln,k as Pn,l as Vn,m as An,n as Tn,o as Dn,i as $n,g as Hn,p as En,d as Bn}from"./chartZoom-pugbQQdv.js";var Fn=`
    .p-textarea {
        font-family: inherit;
        font-feature-settings: inherit;
        font-size: 1rem;
        color: dt('textarea.color');
        background: dt('textarea.background');
        padding-block: dt('textarea.padding.y');
        padding-inline: dt('textarea.padding.x');
        border: 1px solid dt('textarea.border.color');
        transition:
            background dt('textarea.transition.duration'),
            color dt('textarea.transition.duration'),
            border-color dt('textarea.transition.duration'),
            outline-color dt('textarea.transition.duration'),
            box-shadow dt('textarea.transition.duration');
        appearance: none;
        border-radius: dt('textarea.border.radius');
        outline-color: transparent;
        box-shadow: dt('textarea.shadow');
    }

    .p-textarea:enabled:hover {
        border-color: dt('textarea.hover.border.color');
    }

    .p-textarea:enabled:focus {
        border-color: dt('textarea.focus.border.color');
        box-shadow: dt('textarea.focus.ring.shadow');
        outline: dt('textarea.focus.ring.width') dt('textarea.focus.ring.style') dt('textarea.focus.ring.color');
        outline-offset: dt('textarea.focus.ring.offset');
    }

    .p-textarea.p-invalid {
        border-color: dt('textarea.invalid.border.color');
    }

    .p-textarea.p-variant-filled {
        background: dt('textarea.filled.background');
    }

    .p-textarea.p-variant-filled:enabled:hover {
        background: dt('textarea.filled.hover.background');
    }

    .p-textarea.p-variant-filled:enabled:focus {
        background: dt('textarea.filled.focus.background');
    }

    .p-textarea:disabled {
        opacity: 1;
        background: dt('textarea.disabled.background');
        color: dt('textarea.disabled.color');
    }

    .p-textarea::placeholder {
        color: dt('textarea.placeholder.color');
    }

    .p-textarea.p-invalid::placeholder {
        color: dt('textarea.invalid.placeholder.color');
    }

    .p-textarea-fluid {
        width: 100%;
    }

    .p-textarea-resizable {
        overflow: hidden;
        resize: none;
    }

    .p-textarea-sm {
        font-size: dt('textarea.sm.font.size');
        padding-block: dt('textarea.sm.padding.y');
        padding-inline: dt('textarea.sm.padding.x');
    }

    .p-textarea-lg {
        font-size: dt('textarea.lg.font.size');
        padding-block: dt('textarea.lg.padding.y');
        padding-inline: dt('textarea.lg.padding.x');
    }
`,zn={root:function(e){var n=e.instance,o=e.props;return["p-textarea p-component",{"p-filled":n.$filled,"p-textarea-resizable ":o.autoResize,"p-textarea-sm p-inputfield-sm":o.size==="small","p-textarea-lg p-inputfield-lg":o.size==="large","p-invalid":n.$invalid,"p-variant-filled":n.$variant==="filled","p-textarea-fluid":n.$fluid}]}},Rn=Ue.extend({name:"textarea",style:Fn,classes:zn}),Un={name:"BaseTextarea",extends:Mt,props:{autoResize:Boolean},style:Rn,provide:function(){return{$pcTextarea:this,$parentInstance:this}}};function be(t){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(t)}function Kn(t,e,n){return(e=jn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jn(t){var e=Nn(t,"string");return be(e)=="symbol"?e:e+""}function Nn(t,e){if(be(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(be(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yt={name:"Textarea",extends:Un,inheritAttrs:!1,observer:null,mounted:function(){var e=this;this.autoResize&&(this.observer=new ResizeObserver(function(){requestAnimationFrame(function(){e.resize()})}),this.observer.observe(this.$el))},updated:function(){this.autoResize&&this.resize()},beforeUnmount:function(){this.observer&&this.observer.disconnect()},methods:{resize:function(){if(this.$el.offsetParent){var e=this.$el.style.height,n=parseInt(e)||0,o=this.$el.scrollHeight,l=!n||o>n,i=n&&o<n;i?(this.$el.style.height="auto",this.$el.style.height="".concat(this.$el.scrollHeight,"px")):l&&(this.$el.style.height="".concat(o,"px"))}},onInput:function(e){this.autoResize&&this.resize(),this.writeValue(e.target.value,e)}},computed:{attrs:function(){return V(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)},dataP:function(){return at(Kn({invalid:this.$invalid,fluid:this.$fluid,filled:this.$variant==="filled"},this.size,this.size))}}},Gn=["value","name","disabled","aria-invalid","data-p"];function Zn(t,e,n,o,l,i){return x(),_("textarea",V({class:t.cx("root"),value:t.d_value,name:t.name,disabled:t.disabled,"aria-invalid":t.invalid||void 0,"data-p":i.dataP,onInput:e[0]||(e[0]=function(){return i.onInput&&i.onInput.apply(i,arguments)})},i.attrs),null,16,Gn)}yt.render=Zn;const Xn={class:"flex flex-row"},qn={class:"flex flex-col grow"},Yn={for:"selAvailableIndicator",class:"form-label"},xt=ae({__name:"PlotIndicatorSelect",props:{modelValue:{default:""},columns:{},label:{}},emits:["update:modelValue","indicatorSelected"],setup(t,{emit:e}){const n=t,o=e,l=T("");function i(){o("indicatorSelected",l.value),o("update:modelValue",l.value)}function s(){l.value="",i()}return Ke(()=>{l.value=n.modelValue}),N(l,()=>{i()}),N(()=>n.modelValue,r=>{l.value=r}),(r,u)=>{const p=ve,d=rt,C=ye;return x(),_("div",Xn,[S("div",qn,[S("label",Yn,U(t.label),1),v(p,{modelValue:a(l),"onUpdate:modelValue":u[0]||(u[0]=M=>j(l)?l.value=M:null),options:t.columns,size:"small",clearable:!1,filter:"","auto-filter-focus":""},null,8,["modelValue","options"])]),v(C,{size:"small",title:"Abort",class:"ms-1 mt-auto",severity:"secondary",onClick:s},{icon:L(()=>[v(d)]),_:1})])}}}),Wn={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Jn(t,e){return x(),_("svg",Wn,[...e[0]||(e[0]=[S("path",{fill:"currentColor",d:"M19.78 3h-8.56C10.55 3 10 3.55 10 4.22V8h6v6h3.78c.67 0 1.22-.55 1.22-1.22V4.22C21 3.55 20.45 3 19.78 3m-7.34 3.67a1.23 1.23 0 1 1 0-2.46a1.23 1.23 0 0 1 1.23 1.23c0 .68-.55 1.23-1.23 1.23m6.12 6.11a1.23 1.23 0 1 1-.02-2.46c.68-.01 1.23.54 1.24 1.24c-.01.67-.55 1.21-1.22 1.22m0-6.11a1.23 1.23 0 1 1-.02-2.46a1.231 1.231 0 0 1 .02 2.46M4.22 10h8.56A1.22 1.22 0 0 1 14 11.22v8.56c0 .67-.55 1.22-1.22 1.22H4.22C3.55 21 3 20.45 3 19.78v-8.56c0-.67.55-1.22 1.22-1.22m4.28 4.28c-.67 0-1.22.55-1.22 1.22s.55 1.22 1.22 1.22s1.22-.55 1.22-1.22a1.22 1.22 0 0 0-1.22-1.22m-3.06-3.06c-.67 0-1.22.55-1.22 1.22a1.22 1.22 0 0 0 1.22 1.22c.67 0 1.22-.55 1.22-1.22s-.55-1.22-1.22-1.22m6.11 6.11c-.67 0-1.22.55-1.22 1.22s.55 1.22 1.22 1.22a1.22 1.22 0 0 0 1.22-1.22c0-.67-.54-1.21-1.21-1.22z"},null,-1)])])}const Qn=Lt({name:"mdi-dice-multiple",render:Jn});var ei=`
    .p-colorpicker {
        display: inline-block;
        position: relative;
    }

    .p-colorpicker-dragging {
        cursor: pointer;
    }

    .p-colorpicker-preview {
        width: dt('colorpicker.preview.width');
        height: dt('colorpicker.preview.height');
        padding: 0;
        border: 0 none;
        border-radius: dt('colorpicker.preview.border.radius');
        transition:
            background dt('colorpicker.transition.duration'),
            color dt('colorpicker.transition.duration'),
            border-color dt('colorpicker.transition.duration'),
            outline-color dt('colorpicker.transition.duration'),
            box-shadow dt('colorpicker.transition.duration');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-colorpicker-preview:enabled:focus-visible {
        border-color: dt('colorpicker.preview.focus.border.color');
        box-shadow: dt('colorpicker.preview.focus.ring.shadow');
        outline: dt('colorpicker.preview.focus.ring.width') dt('colorpicker.preview.focus.ring.style') dt('colorpicker.preview.focus.ring.color');
        outline-offset: dt('colorpicker.preview.focus.ring.offset');
    }

    .p-colorpicker-panel {
        background: dt('colorpicker.panel.background');
        border: 1px solid dt('colorpicker.panel.border.color');
        border-radius: dt('colorpicker.panel.border.radius');
        box-shadow: dt('colorpicker.panel.shadow');
        width: 193px;
        height: 166px;
        position: absolute;
        top: 0;
        left: 0;
    }

    .p-colorpicker-panel-inline {
        box-shadow: none;
        position: static;
    }

    .p-colorpicker-content {
        position: relative;
    }

    .p-colorpicker-color-selector {
        width: 150px;
        height: 150px;
        inset-block-start: 8px;
        inset-inline-start: 8px;
        position: absolute;
    }

    .p-colorpicker-color-background {
        width: 100%;
        height: 100%;
        background: linear-gradient(to top, #000 0%, rgba(0, 0, 0, 0) 100%), linear-gradient(to right, #fff 0%, rgba(255, 255, 255, 0) 100%);
    }

    .p-colorpicker-color-handle {
        position: absolute;
        inset-block-start: 0px;
        inset-inline-start: 150px;
        border-radius: 100%;
        width: 10px;
        height: 10px;
        border-width: 1px;
        border-style: solid;
        margin: -5px 0 0 -5px;
        cursor: pointer;
        opacity: 0.85;
        border-color: dt('colorpicker.handle.color');
    }

    .p-colorpicker-hue {
        width: 17px;
        height: 150px;
        inset-block-start: 8px;
        inset-inline-start: 167px;
        position: absolute;
        opacity: 0.85;
        background: linear-gradient(0deg, red 0, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, red);
    }

    .p-colorpicker-hue-handle {
        position: absolute;
        inset-block-start: 150px;
        inset-inline-start: 0px;
        width: 21px;
        margin-inline-start: -2px;
        margin-block-start: -5px;
        height: 10px;
        border-width: 2px;
        border-style: solid;
        opacity: 0.85;
        cursor: pointer;
        border-color: dt('colorpicker.handle.color');
    }
`,ti={root:"p-colorpicker p-component",preview:function(e){var n=e.props;return["p-colorpicker-preview",{"p-disabled":n.disabled}]},panel:function(e){var n=e.instance,o=e.props;return["p-colorpicker-panel",{"p-colorpicker-panel-inline":o.inline,"p-disabled":o.disabled,"p-invalid":n.$invalid}]},colorSelector:"p-colorpicker-color-selector",colorBackground:"p-colorpicker-color-background",colorHandle:"p-colorpicker-color-handle",hue:"p-colorpicker-hue",hueHandle:"p-colorpicker-hue-handle"},ni=Ue.extend({name:"colorpicker",style:ei,classes:ti}),ii={name:"BaseColorPicker",extends:dt,props:{defaultColor:{type:null,default:"ff0000"},inline:{type:Boolean,default:!1},format:{type:String,default:"hex"},tabindex:{type:String,default:null},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},appendTo:{type:[String,Object],default:"body"},inputId:{type:String,default:null},panelClass:null,overlayClass:null},style:ni,provide:function(){return{$pcColorPicker:this,$parentInstance:this}}},St={name:"ColorPicker",extends:ii,inheritAttrs:!1,emits:["change","show","hide"],data:function(){return{overlayVisible:!1}},hsbValue:null,localHue:null,outsideClickListener:null,documentMouseMoveListener:null,documentMouseUpListener:null,scrollHandler:null,resizeListener:null,hueDragging:null,colorDragging:null,selfUpdate:null,picker:null,colorSelector:null,colorHandle:null,hueView:null,hueHandle:null,watch:{modelValue:{immediate:!0,handler:function(e){this.hsbValue=this.toHSB(e),this.selfUpdate?this.selfUpdate=!1:this.updateUI()}}},beforeUnmount:function(){this.unbindOutsideClickListener(),this.unbindDragListeners(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.picker&&this.autoZIndex&&Le.clear(this.picker),this.clearRefs()},mounted:function(){this.updateUI()},methods:{pickColor:function(e){var n=this.colorSelector.getBoundingClientRect(),o=n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),l=n.left+document.body.scrollLeft,i=Math.floor(100*Math.max(0,Math.min(150,(e.pageX||e.changedTouches[0].pageX)-l))/150),s=Math.floor(100*(150-Math.max(0,Math.min(150,(e.pageY||e.changedTouches[0].pageY)-o)))/150);this.hsbValue=this.validateHSB({h:this.localHue,s:i,b:s}),this.selfUpdate=!0,this.updateColorHandle(),this.updateInput(),this.updateModel(e)},pickHue:function(e){var n=this.hueView.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0);this.localHue=Math.floor(360*(150-Math.max(0,Math.min(150,(e.pageY||e.changedTouches[0].pageY)-n)))/150),this.hsbValue=this.validateHSB({h:this.localHue,s:this.hsbValue.s,b:this.hsbValue.b}),this.selfUpdate=!0,this.updateColorSelector(),this.updateHue(),this.updateModel(e),this.updateInput()},updateModel:function(e){var n=this.d_value;switch(this.format){case"hex":n=this.HSBtoHEX(this.hsbValue);break;case"rgb":n=this.HSBtoRGB(this.hsbValue);break;case"hsb":n=this.hsbValue;break}this.writeValue(n,e),this.$emit("change",{event:e,value:n})},updateColorSelector:function(){if(this.colorSelector){var e=this.validateHSB({h:this.hsbValue.h,s:100,b:100});this.colorSelector.style.backgroundColor="#"+this.HSBtoHEX(e)}},updateColorHandle:function(){this.colorHandle&&(this.colorHandle.style.left=Math.floor(150*this.hsbValue.s/100)+"px",this.colorHandle.style.top=Math.floor(150*(100-this.hsbValue.b)/100)+"px")},updateHue:function(){this.hueHandle&&(this.hueHandle.style.top=Math.floor(150-150*this.hsbValue.h/360)+"px")},updateInput:function(){this.$refs.input&&(this.$refs.input.style.backgroundColor="#"+this.HSBtoHEX(this.hsbValue))},updateUI:function(){this.updateHue(),this.updateColorHandle(),this.updateInput(),this.updateColorSelector()},validateHSB:function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},validateRGB:function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},validateHEX:function(e){var n=6-e.length;if(n>0){for(var o=[],l=0;l<n;l++)o.push("0");o.push(e),e=o.join("")}return e},HEXtoRGB:function(e){var n=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:n>>16,g:(n&65280)>>8,b:n&255}},HEXtoHSB:function(e){return this.RGBtoHSB(this.HEXtoRGB(e))},RGBtoHSB:function(e){var n={h:0,s:0,b:0},o=Math.min(e.r,e.g,e.b),l=Math.max(e.r,e.g,e.b),i=l-o;return n.b=l,n.s=l!==0?255*i/l:0,n.s!==0?e.r===l?n.h=(e.g-e.b)/i:e.g===l?n.h=2+(e.b-e.r)/i:n.h=4+(e.r-e.g)/i:n.h=-1,n.h*=60,n.h<0&&(n.h+=360),n.s*=100/255,n.b*=100/255,n},HSBtoRGB:function(e){var n={r:null,g:null,b:null},o=Math.round(e.h),l=Math.round(e.s*255/100),i=Math.round(e.b*255/100);if(l===0)n={r:i,g:i,b:i};else{var s=i,r=(255-l)*i/255,u=(s-r)*(o%60)/60;o===360&&(o=0),o<60?(n.r=s,n.b=r,n.g=r+u):o<120?(n.g=s,n.b=r,n.r=s-u):o<180?(n.g=s,n.r=r,n.b=r+u):o<240?(n.b=s,n.r=r,n.g=s-u):o<300?(n.b=s,n.g=r,n.r=r+u):o<360?(n.r=s,n.g=r,n.b=s-u):(n.r=0,n.g=0,n.b=0)}return{r:Math.round(n.r),g:Math.round(n.g),b:Math.round(n.b)}},RGBtoHEX:function(e){var n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];for(var o in n)n[o].length===1&&(n[o]="0"+n[o]);return n.join("")},HSBtoHEX:function(e){return this.RGBtoHEX(this.HSBtoRGB(e))},toHSB:function(e){var n;if(e)switch(this.format){case"hex":n=this.HEXtoHSB(e);break;case"rgb":n=this.RGBtoHSB(e);break;case"hsb":n=e;break}else n=this.HEXtoHSB(this.defaultColor);return n.s===0||n.b===0?n.h=this.localHue:this.localHue=n.h,n},onOverlayEnter:function(e){this.updateUI(),this.alignOverlay(),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.autoZIndex&&Le.set("overlay",e,this.baseZIndex,this.$primevue.config.zIndex.overlay),this.$attrSelector&&e.setAttribute(this.$attrSelector,""),this.$emit("show")},onOverlayLeave:function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.clearRefs(),this.$emit("hide")},onOverlayAfterLeave:function(e){this.autoZIndex&&Le.clear(e)},alignOverlay:function(){this.appendTo==="self"?$t(this.picker,this.$refs.input):Ht(this.picker,this.$refs.input)},onInputClick:function(){this.disabled||(this.overlayVisible=!this.overlayVisible)},onInputKeydown:function(e){switch(e.code){case"Space":this.overlayVisible=!this.overlayVisible,e.preventDefault();break;case"Escape":case"Tab":this.overlayVisible=!1;break}},onInputBlur:function(e){var n,o;(n=(o=this.formField).onBlur)===null||n===void 0||n.call(o)},onColorMousedown:function(e){this.disabled||(this.bindDragListeners(),this.onColorDragStart(e))},onColorDragStart:function(e){this.disabled||(this.colorDragging=!0,this.pickColor(e),this.$el.setAttribute("p-colorpicker-dragging","true"),!this.isUnstyled&&Ze(this.$el,"p-colorpicker-dragging"),e.preventDefault())},onDrag:function(e){this.colorDragging&&(this.pickColor(e),e.preventDefault()),this.hueDragging&&(this.pickHue(e),e.preventDefault())},onDragEnd:function(){this.colorDragging=!1,this.hueDragging=!1,this.$el.setAttribute("p-colorpicker-dragging","false"),!this.isUnstyled&&Dt(this.$el,"p-colorpicker-dragging"),this.unbindDragListeners()},onHueMousedown:function(e){this.disabled||(this.bindDragListeners(),this.onHueDragStart(e))},onHueDragStart:function(e){this.disabled||(this.hueDragging=!0,this.pickHue(e),!this.isUnstyled&&Ze(this.$el,"p-colorpicker-dragging"),e.preventDefault())},isInputClicked:function(e){return this.$refs.input&&this.$refs.input.isSameNode(e.target)},bindDragListeners:function(){this.bindDocumentMouseMoveListener(),this.bindDocumentMouseUpListener()},unbindDragListeners:function(){this.unbindDocumentMouseMoveListener(),this.unbindDocumentMouseUpListener()},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){e.overlayVisible&&e.picker&&!e.picker.contains(n.target)&&!e.isInputClicked(n)&&(e.overlayVisible=!1)},document.addEventListener("click",this.outsideClickListener,!0))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener,!0),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new Tt(this.$refs.container,function(){e.overlayVisible&&(e.overlayVisible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!At()&&(e.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},bindDocumentMouseMoveListener:function(){this.documentMouseMoveListener||(this.documentMouseMoveListener=this.onDrag.bind(this),document.addEventListener("mousemove",this.documentMouseMoveListener))},unbindDocumentMouseMoveListener:function(){this.documentMouseMoveListener&&(document.removeEventListener("mousemove",this.documentMouseMoveListener),this.documentMouseMoveListener=null)},bindDocumentMouseUpListener:function(){this.documentMouseUpListener||(this.documentMouseUpListener=this.onDragEnd.bind(this),document.addEventListener("mouseup",this.documentMouseUpListener))},unbindDocumentMouseUpListener:function(){this.documentMouseUpListener&&(document.removeEventListener("mouseup",this.documentMouseUpListener),this.documentMouseUpListener=null)},pickerRef:function(e){this.picker=e},colorSelectorRef:function(e){this.colorSelector=e},colorHandleRef:function(e){this.colorHandle=e},hueViewRef:function(e){this.hueView=e},hueHandleRef:function(e){this.hueHandle=e},clearRefs:function(){this.picker=null,this.colorSelector=null,this.colorHandle=null,this.hueView=null,this.hueHandle=null},onOverlayClick:function(e){Vt.emit("overlay-click",{originalEvent:e,target:this.$el})}},components:{Portal:Pt}};function ge(t){"@babel/helpers - typeof";return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(t)}function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,o)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?et(Object(n),!0).forEach(function(o){oi(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function oi(t,e,n){return(e=li(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function li(t){var e=si(t,"string");return ge(e)=="symbol"?e:e+""}function si(t,e){if(ge(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(ge(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ai=["id","tabindex","disabled"];function ri(t,e,n,o,l,i){var s=le("Portal");return x(),_("div",V({ref:"container",class:t.cx("root")},t.ptmi("root")),[t.inline?$("",!0):(x(),_("input",V({key:0,ref:"input",id:t.inputId,type:"text",class:t.cx("preview"),readonly:"",tabindex:t.tabindex,disabled:t.disabled,onClick:e[0]||(e[0]=function(){return i.onInputClick&&i.onInputClick.apply(i,arguments)}),onKeydown:e[1]||(e[1]=function(){return i.onInputKeydown&&i.onInputKeydown.apply(i,arguments)}),onBlur:e[2]||(e[2]=function(){return i.onInputBlur&&i.onInputBlur.apply(i,arguments)})},t.ptm("preview")),null,16,ai)),v(s,{appendTo:t.appendTo,disabled:t.inline},{default:L(function(){return[v(ut,V({name:"p-connected-overlay",onEnter:i.onOverlayEnter,onLeave:i.onOverlayLeave,onAfterLeave:i.onOverlayAfterLeave},t.ptm("transition")),{default:L(function(){return[t.inline||l.overlayVisible?(x(),_("div",V({key:0,ref:i.pickerRef,class:[t.cx("panel"),t.panelClass,t.overlayClass],onClick:e[11]||(e[11]=function(){return i.onOverlayClick&&i.onOverlayClick.apply(i,arguments)})},tt(tt({},t.ptm("panel")),t.ptm("overlay"))),[S("div",V({class:t.cx("content")},t.ptm("content")),[S("div",V({ref:i.colorSelectorRef,class:t.cx("colorSelector"),onMousedown:e[3]||(e[3]=function(r){return i.onColorMousedown(r)}),onTouchstart:e[4]||(e[4]=function(r){return i.onColorDragStart(r)}),onTouchmove:e[5]||(e[5]=function(r){return i.onDrag(r)}),onTouchend:e[6]||(e[6]=function(r){return i.onDragEnd()})},t.ptm("colorSelector")),[S("div",V({class:t.cx("colorBackground")},t.ptm("colorBackground")),[S("div",V({ref:i.colorHandleRef,class:t.cx("colorHandle")},t.ptm("colorHandle")),null,16)],16)],16),S("div",V({ref:i.hueViewRef,class:t.cx("hue"),onMousedown:e[7]||(e[7]=function(r){return i.onHueMousedown(r)}),onTouchstart:e[8]||(e[8]=function(r){return i.onHueDragStart(r)}),onTouchmove:e[9]||(e[9]=function(r){return i.onDrag(r)}),onTouchend:e[10]||(e[10]=function(r){return i.onDragEnd()})},t.ptm("hue")),[S("div",V({ref:i.hueHandleRef,class:t.cx("hueHandle")},t.ptm("hueHandle")),null,16)],16)],16)],16)):$("",!0)]}),_:1},16,["onEnter","onLeave","onAfterLeave"])]}),_:1},8,["appendTo","disabled"])],16)}St.render=ri;function me(){return`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`}const di={class:"flex flex-col lg:flex-row justify-between mt-1"},ui={class:"flex flex-col w-full"},ci={class:"flex flex-col w-full"},pi={key:1,class:"flex flex-col mt-2 gap-1 items-center"},fi=ae({__name:"PlotIndicator",props:{modelValue:{},columns:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,o=e,l=T(me()),i=D({get:()=>l.value,set:w=>{!w.startsWith("#")&&(w.length===3||w.length===6)&&/^[0-9a-fA-F]+$/.test(w)&&(w=`#${w}`),l.value=w}}),s=T(ee.line),r=T(Object.keys(ee)),u=T(""),p=T(!1),d=T(""),C=T(3);function M(){i.value=me()}const E=D(()=>{if(p.value||!u.value)return{};const w={color:i.value,type:s.value};return d.value&&s.value===ee.line&&(w.fill_to=d.value),s.value==ee.scatter&&(w.scatterSymbolSize=C.value),{[u.value]:w}});function A(){o("update:modelValue",E.value)}return N(()=>n.modelValue,()=>{const[w]=Object.keys(n.modelValue);if(w&&(u.value=w),p.value=!1,u.value&&n.modelValue){const O=n.modelValue[u.value];if(!O)return;i.value=O.color||me(),s.value=O.type||ee.line,d.value=O.fill_to||""}},{immediate:!0}),Et([i,s,d,C],()=>{A()},{debounce:200}),(w,O)=>{const h=ve,c=St,y=fn,P=ct,f=Qn,m=ye,H=pn,z=xt,Y=gt;return x(),_("div",null,[S("div",di,[S("div",ui,[O[5]||(O[5]=S("label",{for:"plotTypeSelector",class:"form-label"},"Type",-1)),v(h,{id:"plotTypeSelector",modelValue:a(s),"onUpdate:modelValue":O[0]||(O[0]=B=>j(s)?s.value=B:null),class:"text-left",size:"small",options:a(r)},null,8,["modelValue","options"])]),S("div",ci,[O[6]||(O[6]=S("label",{for:"selAvailableIndicator",class:"colsel"},"Color",-1)),v(H,null,{default:L(()=>[v(y,{class:"p-0!"},{default:L(()=>[v(c,{modelValue:a(i),"onUpdate:modelValue":O[1]||(O[1]=B=>j(i)?i.value=B:null),type:"color",class:"m-auto"},null,8,["modelValue"])]),_:1}),v(P,{id:"colsel",modelValue:a(i),"onUpdate:modelValue":O[2]||(O[2]=B=>j(i)?i.value=B:null),size:"small",class:"grow"},null,8,["modelValue"]),v(y,null,{default:L(()=>[v(m,{severity:"primary",size:"small",onClick:M},{icon:L(()=>[v(f)]),_:1})]),_:1})]),_:1})])]),a(s)===a(ee).line?(x(),Z(z,{key:0,modelValue:a(d),"onUpdate:modelValue":O[3]||(O[3]=B=>j(d)?d.value=B:null),columns:t.columns,class:"mt-1",label:"Area chart - Fill to (leave empty for line chart)"},null,8,["modelValue","columns"])):$("",!0),a(s)===a(ee).scatter?(x(),_("div",pi,[O[7]||(O[7]=S("label",{for:"scatterSymbolSize",class:"text-nowrap"},"Scatter symbol size",-1)),v(Y,{id:"scatterSymbolSize",modelValue:a(C),"onUpdate:modelValue":O[4]||(O[4]=B=>j(C)?C.value=B:null),min:0,"show-buttons":"",size:"small","button-layout":"horizontal",class:"text-center w-full"},null,8,["modelValue"])])):$("",!0)])}}});var hi=`
    .p-listbox {
        display: block;
        background: dt('listbox.background');
        color: dt('listbox.color');
        border: 1px solid dt('listbox.border.color');
        border-radius: dt('listbox.border.radius');
        transition:
            background dt('listbox.transition.duration'),
            color dt('listbox.transition.duration'),
            border-color dt('listbox.transition.duration'),
            box-shadow dt('listbox.transition.duration'),
            outline-color dt('listbox.transition.duration');
        outline-color: transparent;
        box-shadow: dt('listbox.shadow');
    }

    .p-listbox.p-disabled {
        opacity: 1;
        background: dt('listbox.disabled.background');
        color: dt('listbox.disabled.color');
    }

    .p-listbox.p-disabled .p-listbox-option {
        color: dt('listbox.disabled.color');
    }

    .p-listbox.p-invalid {
        border-color: dt('listbox.invalid.border.color');
    }

    .p-listbox-header {
        padding: dt('listbox.list.header.padding');
    }

    .p-listbox-filter {
        width: 100%;
    }

    .p-listbox-list-container {
        overflow: auto;
    }

    .p-listbox-list {
        list-style-type: none;
        margin: 0;
        padding: dt('listbox.list.padding');
        outline: 0 none;
        display: flex;
        flex-direction: column;
        gap: dt('listbox.list.gap');
    }

    .p-listbox-option {
        display: flex;
        align-items: center;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        padding: dt('listbox.option.padding');
        border: 0 none;
        border-radius: dt('listbox.option.border.radius');
        color: dt('listbox.option.color');
        transition:
            background dt('listbox.transition.duration'),
            color dt('listbox.transition.duration'),
            border-color dt('listbox.transition.duration'),
            box-shadow dt('listbox.transition.duration'),
            outline-color dt('listbox.transition.duration');
    }

    .p-listbox-striped li:nth-child(even of .p-listbox-option) {
        background: dt('listbox.option.striped.background');
    }

    .p-listbox .p-listbox-list .p-listbox-option.p-listbox-option-selected {
        background: dt('listbox.option.selected.background');
        color: dt('listbox.option.selected.color');
    }

    .p-listbox:not(.p-disabled) .p-listbox-option.p-listbox-option-selected.p-focus {
        background: dt('listbox.option.selected.focus.background');
        color: dt('listbox.option.selected.focus.color');
    }

    .p-listbox:not(.p-disabled) .p-listbox-option:not(.p-listbox-option-selected):not(.p-disabled).p-focus {
        background: dt('listbox.option.focus.background');
        color: dt('listbox.option.focus.color');
    }

    .p-listbox:not(.p-disabled) .p-listbox-option:not(.p-listbox-option-selected):not(.p-disabled):hover {
        background: dt('listbox.option.focus.background');
        color: dt('listbox.option.focus.color');
    }

    .p-listbox-option-blank-icon {
        flex-shrink: 0;
    }

    .p-listbox-option-check-icon {
        position: relative;
        flex-shrink: 0;
        margin-inline-start: dt('listbox.checkmark.gutter.start');
        margin-inline-end: dt('listbox.checkmark.gutter.end');
        color: dt('listbox.checkmark.color');
    }

    .p-listbox-option-group {
        margin: 0;
        padding: dt('listbox.option.group.padding');
        color: dt('listbox.option.group.color');
        background: dt('listbox.option.group.background');
        font-weight: dt('listbox.option.group.font.weight');
    }

    .p-listbox-empty-message {
        padding: dt('listbox.empty.message.padding');
    }

    .p-listbox-fluid {
        width: 100%;
    }
`,mi={root:function(e){var n=e.instance,o=e.props;return["p-listbox p-component",{"p-listbox-striped":o.striped,"p-disabled":o.disabled,"p-listbox-fluid":o.fluid,"p-invalid":n.$invalid}]},header:"p-listbox-header",pcFilter:"p-listbox-filter",listContainer:"p-listbox-list-container",list:"p-listbox-list",optionGroup:"p-listbox-option-group",option:function(e){var n=e.instance,o=e.props,l=e.option,i=e.index,s=e.getItemOptions;return["p-listbox-option",{"p-listbox-option-selected":n.isSelected(l)&&o.highlightOnSelect,"p-focus":n.focusedOptionIndex===n.getOptionIndex(i,s),"p-disabled":n.isOptionDisabled(l)}]},optionCheckIcon:"p-listbox-option-check-icon",optionBlankIcon:"p-listbox-option-blank-icon",emptyMessage:"p-listbox-empty-message"},bi=Ue.extend({name:"listbox",style:hi,classes:mi}),gi={name:"BaseListbox",extends:dt,props:{options:Array,optionLabel:null,optionValue:null,optionDisabled:null,optionGroupLabel:null,optionGroupChildren:null,listStyle:null,scrollHeight:{type:String,default:"14rem"},dataKey:null,multiple:{type:Boolean,default:!1},metaKeySelection:{type:Boolean,default:!1},filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},virtualScrollerOptions:{type:Object,default:null},autoOptionFocus:{type:Boolean,default:!0},selectOnFocus:{type:Boolean,default:!1},focusOnHover:{type:Boolean,default:!0},highlightOnSelect:{type:Boolean,default:!0},checkmark:{type:Boolean,default:!1},filterMessage:{type:String,default:null},selectionMessage:{type:String,default:null},emptySelectionMessage:{type:String,default:null},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null},filterIcon:{type:String,default:void 0},striped:{type:Boolean,default:!1},tabindex:{type:Number,default:0},fluid:{type:Boolean,default:null},ariaLabel:{type:String,default:null},ariaLabelledby:{type:String,default:null}},style:bi,provide:function(){return{$pcListbox:this,$parentInstance:this}}};function Ve(t){return Si(t)||xi(t)||yi(t)||vi()}function vi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yi(t,e){if(t){if(typeof t=="string")return ze(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(t,e):void 0}}function xi(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Si(t){if(Array.isArray(t))return ze(t)}function ze(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Ne={name:"Listbox",extends:gi,inheritAttrs:!1,emits:["change","focus","blur","filter","item-dblclick","option-dblclick"],list:null,virtualScroller:null,optionTouched:!1,startRangeIndex:-1,searchTimeout:null,searchValue:"",data:function(){return{filterValue:null,focused:!1,focusedOptionIndex:-1}},watch:{options:function(){this.autoUpdateModel()}},mounted:function(){this.autoUpdateModel()},methods:{getOptionIndex:function(e,n){return this.virtualScrollerDisabled?e:n&&n(e).index},getOptionLabel:function(e){return this.optionLabel?ue(e,this.optionLabel):typeof e=="string"||typeof e=="number"||typeof e=="boolean"?e:null},getOptionValue:function(e){return this.optionValue?ue(e,this.optionValue):e},getOptionRenderKey:function(e,n){return(this.dataKey?ue(e,this.dataKey):this.getOptionLabel(e))+"_"+n},getPTOptions:function(e,n,o,l){return this.ptm(l,{context:{selected:this.isSelected(e),focused:this.focusedOptionIndex===this.getOptionIndex(o,n),disabled:this.isOptionDisabled(e)}})},isOptionDisabled:function(e){return this.optionDisabled?ue(e,this.optionDisabled):!1},isOptionGroup:function(e){return this.optionGroupLabel&&e.optionGroup&&e.group},getOptionGroupLabel:function(e){return ue(e,this.optionGroupLabel)},getOptionGroupChildren:function(e){return ue(e,this.optionGroupChildren)},getAriaPosInset:function(e){var n=this;return(this.optionGroupLabel?e-this.visibleOptions.slice(0,e).filter(function(o){return n.isOptionGroup(o)}).length:e)+1},onFirstHiddenFocus:function(){Pe(this.list);var e=Ye(this.$el,':not([data-p-hidden-focusable="true"])');this.$refs.lastHiddenFocusableElement.tabIndex=Zt(e)?void 0:-1,this.$refs.firstHiddenFocusableElement.tabIndex=-1},onLastHiddenFocus:function(e){var n=e.relatedTarget;if(n===this.list){var o=Ye(this.$el,':not([data-p-hidden-focusable="true"])');Pe(o),this.$refs.firstHiddenFocusableElement.tabIndex=void 0}else Pe(this.$refs.firstHiddenFocusableElement);this.$refs.lastHiddenFocusableElement.tabIndex=-1},onFocusout:function(e){!this.$el.contains(e.relatedTarget)&&this.$refs.lastHiddenFocusableElement&&this.$refs.firstHiddenFocusableElement&&(this.$refs.lastHiddenFocusableElement.tabIndex=this.$refs.firstHiddenFocusableElement.tabIndex=void 0)},onListFocus:function(e){this.focused=!0,this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.findSelectedOptionIndex(),this.autoUpdateModel(),this.scrollInView(this.focusedOptionIndex),this.$emit("focus",e)},onListBlur:function(e){this.focused=!1,this.focusedOptionIndex=this.startRangeIndex=-1,this.searchValue="",this.$emit("blur",e)},onListKeyDown:function(e){var n=this,o=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"NumpadEnter":case"Space":this.onSpaceKey(e);break;case"Tab":break;case"ShiftLeft":case"ShiftRight":this.onShiftKey(e);break;default:if(this.multiple&&e.code==="KeyA"&&o){var l=this.visibleOptions.filter(function(i){return n.isValidOption(i)}).map(function(i){return n.getOptionValue(i)});this.updateModel(e,l),e.preventDefault();break}!o&&Gt(e.key)&&(this.searchOptions(e,e.key),e.preventDefault());break}},onOptionSelect:function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;this.disabled||this.isOptionDisabled(n)||(this.multiple?this.onOptionSelectMultiple(e,n):this.onOptionSelectSingle(e,n),this.optionTouched=!1,o!==-1&&(this.focusedOptionIndex=o))},onOptionMouseDown:function(e,n){this.changeFocusedOptionIndex(e,n)},onOptionMouseMove:function(e,n){this.focusOnHover&&this.focused&&this.changeFocusedOptionIndex(e,n)},onOptionTouchEnd:function(){this.disabled||(this.optionTouched=!0)},onOptionDblClick:function(e,n){this.$emit("item-dblclick",{originalEvent:e,value:n}),this.$emit("option-dblclick",{originalEvent:e,value:n})},onOptionSelectSingle:function(e,n){var o=this.isSelected(n),l=!1,i=null,s=this.optionTouched?!1:this.metaKeySelection;if(s){var r=e&&(e.metaKey||e.ctrlKey);o?r&&(i=null,l=!0):(i=this.getOptionValue(n),l=!0)}else i=o?null:this.getOptionValue(n),l=!0;l&&this.updateModel(e,i)},onOptionSelectMultiple:function(e,n){var o=this.isSelected(n),l=null,i=this.optionTouched?!1:this.metaKeySelection;if(i){var s=e.metaKey||e.ctrlKey;o?l=s?this.removeOption(n):[this.getOptionValue(n)]:(l=s?this.d_value||[]:[],l=[].concat(Ve(l),[this.getOptionValue(n)]))}else l=o?this.removeOption(n):[].concat(Ve(this.d_value||[]),[this.getOptionValue(n)]);this.updateModel(e,l)},onOptionSelectRange:function(e){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(o===-1&&(o=this.findNearestSelectedOptionIndex(l,!0)),l===-1&&(l=this.findNearestSelectedOptionIndex(o)),o!==-1&&l!==-1){var i=Math.min(o,l),s=Math.max(o,l),r=this.visibleOptions.slice(i,s+1).filter(function(u){return n.isValidOption(u)}).map(function(u){return n.getOptionValue(u)});this.updateModel(e,r)}},onFilterChange:function(e){this.$emit("filter",{originalEvent:e,value:e.target.value,filterValue:this.visibleOptions}),this.focusedOptionIndex=this.startRangeIndex=-1},onFilterKeyDown:function(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"ShiftLeft":case"ShiftRight":this.onShiftKey(e);break}},onArrowDownKey:function(e){var n=this.focusedOptionIndex!==-1?this.findNextOptionIndex(this.focusedOptionIndex):this.findFirstFocusedOptionIndex();this.multiple&&e.shiftKey&&this.onOptionSelectRange(e,this.startRangeIndex,n),this.changeFocusedOptionIndex(e,n),e.preventDefault()},onArrowUpKey:function(e){var n=this.focusedOptionIndex!==-1?this.findPrevOptionIndex(this.focusedOptionIndex):this.findLastFocusedOptionIndex();this.multiple&&e.shiftKey&&this.onOptionSelectRange(e,n,this.startRangeIndex),this.changeFocusedOptionIndex(e,n),e.preventDefault()},onArrowLeftKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n&&(this.focusedOptionIndex=-1)},onHomeKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){var o=e.currentTarget;e.shiftKey?o.setSelectionRange(0,e.target.selectionStart):(o.setSelectionRange(0,0),this.focusedOptionIndex=-1)}else{var l=e.metaKey||e.ctrlKey,i=this.findFirstOptionIndex();this.multiple&&e.shiftKey&&l&&this.onOptionSelectRange(e,i,this.startRangeIndex),this.changeFocusedOptionIndex(e,i)}e.preventDefault()},onEndKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){var o=e.currentTarget;if(e.shiftKey)o.setSelectionRange(e.target.selectionStart,o.value.length);else{var l=o.value.length;o.setSelectionRange(l,l),this.focusedOptionIndex=-1}}else{var i=e.metaKey||e.ctrlKey,s=this.findLastOptionIndex();this.multiple&&e.shiftKey&&i&&this.onOptionSelectRange(e,this.startRangeIndex,s),this.changeFocusedOptionIndex(e,s)}e.preventDefault()},onPageUpKey:function(e){this.scrollInView(0),e.preventDefault()},onPageDownKey:function(e){this.scrollInView(this.visibleOptions.length-1),e.preventDefault()},onEnterKey:function(e){this.focusedOptionIndex!==-1&&(this.multiple&&e.shiftKey?this.onOptionSelectRange(e,this.focusedOptionIndex):this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]))},onSpaceKey:function(e){e.preventDefault(),this.onEnterKey(e)},onShiftKey:function(){this.startRangeIndex=this.focusedOptionIndex},isOptionMatched:function(e){var n;return this.isValidOption(e)&&typeof this.getOptionLabel(e)=="string"&&((n=this.getOptionLabel(e))===null||n===void 0?void 0:n.toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale)))},isValidOption:function(e){return Ie(e)&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))},isValidSelectedOption:function(e){return this.isValidOption(e)&&this.isSelected(e)},isEquals:function(e,n){return qe(e,n,this.equalityKey)},isSelected:function(e){var n=this,o=this.getOptionValue(e);return this.multiple?(this.d_value||[]).some(function(l){return n.isEquals(l,o)}):this.isEquals(this.d_value,o)},findFirstOptionIndex:function(){var e=this;return this.visibleOptions.findIndex(function(n){return e.isValidOption(n)})},findLastOptionIndex:function(){var e=this;return we(this.visibleOptions,function(n){return e.isValidOption(n)})},findNextOptionIndex:function(e){var n=this,o=e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(l){return n.isValidOption(l)}):-1;return o>-1?o+e+1:e},findPrevOptionIndex:function(e){var n=this,o=e>0?we(this.visibleOptions.slice(0,e),function(l){return n.isValidOption(l)}):-1;return o>-1?o:e},findSelectedOptionIndex:function(){var e=this;if(this.$filled)if(this.multiple){for(var n=function(){var s=e.d_value[l],r=e.visibleOptions.findIndex(function(u){return e.isValidSelectedOption(u)&&e.isEquals(s,e.getOptionValue(u))});if(r>-1)return{v:r}},o,l=this.d_value.length-1;l>=0;l--)if(o=n(),o)return o.v}else return this.visibleOptions.findIndex(function(i){return e.isValidSelectedOption(i)});return-1},findFirstSelectedOptionIndex:function(){var e=this;return this.$filled?this.visibleOptions.findIndex(function(n){return e.isValidSelectedOption(n)}):-1},findLastSelectedOptionIndex:function(){var e=this;return this.$filled?we(this.visibleOptions,function(n){return e.isValidSelectedOption(n)}):-1},findNextSelectedOptionIndex:function(e){var n=this,o=this.$filled&&e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(l){return n.isValidSelectedOption(l)}):-1;return o>-1?o+e+1:-1},findPrevSelectedOptionIndex:function(e){var n=this,o=this.$filled&&e>0?we(this.visibleOptions.slice(0,e),function(l){return n.isValidSelectedOption(l)}):-1;return o>-1?o:-1},findNearestSelectedOptionIndex:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=-1;return this.$filled&&(n?(o=this.findPrevSelectedOptionIndex(e),o=o===-1?this.findNextSelectedOptionIndex(e):o):(o=this.findNextSelectedOptionIndex(e),o=o===-1?this.findPrevSelectedOptionIndex(e):o)),o>-1?o:e},findFirstFocusedOptionIndex:function(){var e=this.findFirstSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e},findLastFocusedOptionIndex:function(){var e=this.findLastSelectedOptionIndex();return e<0?this.findLastOptionIndex():e},searchOptions:function(e,n){var o=this;this.searchValue=(this.searchValue||"")+n;var l=-1;Ie(this.searchValue)&&(this.focusedOptionIndex!==-1?(l=this.visibleOptions.slice(this.focusedOptionIndex).findIndex(function(i){return o.isOptionMatched(i)}),l=l===-1?this.visibleOptions.slice(0,this.focusedOptionIndex).findIndex(function(i){return o.isOptionMatched(i)}):l+this.focusedOptionIndex):l=this.visibleOptions.findIndex(function(i){return o.isOptionMatched(i)}),l===-1&&this.focusedOptionIndex===-1&&(l=this.findFirstFocusedOptionIndex()),l!==-1&&this.changeFocusedOptionIndex(e,l)),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){o.searchValue="",o.searchTimeout=null},500)},removeOption:function(e){var n=this;return this.d_value.filter(function(o){return!qe(o,n.getOptionValue(e),n.equalityKey)})},changeFocusedOptionIndex:function(e,n){this.focusedOptionIndex!==n&&(this.focusedOptionIndex=n,this.scrollInView(),this.selectOnFocus&&!this.multiple&&this.onOptionSelect(e,this.visibleOptions[n]))},scrollInView:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;this.$nextTick(function(){var o=n!==-1?"".concat(e.$id,"_").concat(n):e.focusedOptionId,l=Nt(e.list,'li[id="'.concat(o,'"]'));l?l.scrollIntoView&&l.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}):e.virtualScrollerDisabled||e.virtualScroller&&e.virtualScroller.scrollToIndex(n!==-1?n:e.focusedOptionIndex)})},autoUpdateModel:function(){this.selectOnFocus&&this.autoOptionFocus&&!this.$filled&&!this.multiple&&this.focused&&(this.focusedOptionIndex=this.findFirstFocusedOptionIndex(),this.onOptionSelect(null,this.visibleOptions[this.focusedOptionIndex]))},updateModel:function(e,n){this.writeValue(n,e),this.$emit("change",{originalEvent:e,value:n})},listRef:function(e,n){this.list=e,n&&n(e)},virtualScrollerRef:function(e){this.virtualScroller=e}},computed:{optionsListFlat:function(){return this.filterValue?Xe.filter(this.options,this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale):this.options},optionsListGroup:function(){var e=this,n=[];return(this.options||[]).forEach(function(o){var l=e.getOptionGroupChildren(o)||[],i=e.filterValue?Xe.filter(l,e.searchFields,e.filterValue,e.filterMatchMode,e.filterLocale):l;i!=null&&i.length&&n.push.apply(n,[{optionGroup:o,group:!0}].concat(Ve(i)))}),n},visibleOptions:function(){return this.optionGroupLabel?this.optionsListGroup:this.optionsListFlat},hasSelectedOption:function(){return Ie(this.d_value)},equalityKey:function(){return this.optionValue?null:this.dataKey},searchFields:function(){return this.filterFields||[this.optionLabel]},filterResultMessageText:function(){return Ie(this.visibleOptions)?this.filterMessageText.replaceAll("{0}",this.visibleOptions.length):this.emptyFilterMessageText},filterMessageText:function(){return this.filterMessage||this.$primevue.config.locale.searchMessage||""},emptyFilterMessageText:function(){return this.emptyFilterMessage||this.$primevue.config.locale.emptySearchMessage||this.$primevue.config.locale.emptyFilterMessage||""},emptyMessageText:function(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage||""},selectionMessageText:function(){return this.selectionMessage||this.$primevue.config.locale.selectionMessage||""},emptySelectionMessageText:function(){return this.emptySelectionMessage||this.$primevue.config.locale.emptySelectionMessage||""},selectedMessageText:function(){return this.$filled?this.selectionMessageText.replaceAll("{0}",this.multiple?this.d_value.length:"1"):this.emptySelectionMessageText},focusedOptionId:function(){return this.focusedOptionIndex!==-1?"".concat(this.$id,"_").concat(this.focusedOptionIndex):null},ariaSetSize:function(){var e=this;return this.visibleOptions.filter(function(n){return!e.isOptionGroup(n)}).length},virtualScrollerDisabled:function(){return!this.virtualScrollerOptions},containerDataP:function(){return at({invalid:this.$invalid,disabled:this.disabled})}},directives:{ripple:jt},components:{InputText:ct,VirtualScroller:Kt,InputIcon:Ut,IconField:Rt,SearchIcon:zt,CheckIcon:Ft,BlankIcon:Bt}},Oi=["id","data-p"],Ii=["tabindex"],wi=["id","aria-multiselectable","aria-label","aria-labelledby","aria-activedescendant","aria-disabled"],ki=["id"],Ci=["id","aria-label","aria-selected","aria-disabled","aria-setsize","aria-posinset","onClick","onMousedown","onMousemove","onDblclick","data-p-selected","data-p-focused","data-p-disabled"],_i=["tabindex"];function Mi(t,e,n,o,l,i){var s=le("InputText"),r=le("SearchIcon"),u=le("InputIcon"),p=le("IconField"),d=le("CheckIcon"),C=le("BlankIcon"),M=le("VirtualScroller"),E=Xt("ripple");return x(),_("div",V({id:t.$id,class:t.cx("root"),onFocusout:e[7]||(e[7]=function(){return i.onFocusout&&i.onFocusout.apply(i,arguments)}),"data-p":i.containerDataP},t.ptmi("root")),[S("span",V({ref:"firstHiddenFocusableElement",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:t.disabled?-1:t.tabindex,onFocus:e[0]||(e[0]=function(){return i.onFirstHiddenFocus&&i.onFirstHiddenFocus.apply(i,arguments)})},t.ptm("hiddenFirstFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16,Ii),t.$slots.header?(x(),_("div",V({key:0,class:t.cx("header")},t.ptm("header")),[oe(t.$slots,"header",{value:t.d_value,options:i.visibleOptions})],16)):$("",!0),t.filter?(x(),_("div",V({key:1,class:t.cx("header")},t.ptm("header")),[v(p,{unstyled:t.unstyled,pt:t.ptm("pcFilterContainer")},{default:L(function(){return[v(s,{modelValue:l.filterValue,"onUpdate:modelValue":e[1]||(e[1]=function(A){return l.filterValue=A}),type:"text",class:qt(t.cx("pcFilter")),placeholder:t.filterPlaceholder,role:"searchbox",autocomplete:"off",disabled:t.disabled,unstyled:t.unstyled,"aria-owns":t.$id+"_list","aria-activedescendant":i.focusedOptionId,tabindex:!t.disabled&&!l.focused?t.tabindex:-1,onInput:i.onFilterChange,onKeydown:i.onFilterKeyDown,pt:t.ptm("pcFilter")},null,8,["modelValue","class","placeholder","disabled","unstyled","aria-owns","aria-activedescendant","tabindex","onInput","onKeydown","pt"]),v(u,{unstyled:t.unstyled,pt:t.ptm("pcFilterIconContainer")},{default:L(function(){return[oe(t.$slots,"filtericon",{},function(){return[t.filterIcon?(x(),_("span",V({key:0,class:t.filterIcon},t.ptm("filterIcon")),null,16)):(x(),Z(r,Yt(V({key:1},t.ptm("filterIcon"))),null,16))]})]}),_:3},8,["unstyled","pt"])]}),_:3},8,["unstyled","pt"]),S("span",V({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenFilterResult"),{"data-p-hidden-accessible":!0}),U(i.filterResultMessageText),17)],16)):$("",!0),S("div",V({class:t.cx("listContainer"),style:[{"max-height":i.virtualScrollerDisabled?t.scrollHeight:""},t.listStyle]},t.ptm("listContainer")),[v(M,V({ref:i.virtualScrollerRef},t.virtualScrollerOptions,{items:i.visibleOptions,style:[{height:t.scrollHeight},t.listStyle],tabindex:-1,disabled:i.virtualScrollerDisabled,pt:t.ptm("virtualScroller")}),Wt({content:L(function(A){var w=A.styleClass,O=A.contentRef,h=A.items,c=A.getItemOptions,y=A.contentStyle,P=A.itemSize;return[S("ul",V({ref:function(m){return i.listRef(m,O)},id:t.$id+"_list",class:[t.cx("list"),w],style:y,tabindex:-1,role:"listbox","aria-multiselectable":t.multiple,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledby,"aria-activedescendant":l.focused?i.focusedOptionId:void 0,"aria-disabled":t.disabled,onFocus:e[3]||(e[3]=function(){return i.onListFocus&&i.onListFocus.apply(i,arguments)}),onBlur:e[4]||(e[4]=function(){return i.onListBlur&&i.onListBlur.apply(i,arguments)}),onKeydown:e[5]||(e[5]=function(){return i.onListKeyDown&&i.onListKeyDown.apply(i,arguments)})},t.ptm("list")),[(x(!0),_(ke,null,pt(h,function(f,m){return x(),_(ke,{key:i.getOptionRenderKey(f,i.getOptionIndex(m,c))},[i.isOptionGroup(f)?(x(),_("li",V({key:0,id:t.$id+"_"+i.getOptionIndex(m,c),style:{height:P?P+"px":void 0},class:t.cx("optionGroup"),role:"option"},{ref_for:!0},t.ptm("optionGroup")),[oe(t.$slots,"optiongroup",{option:f.optionGroup,index:i.getOptionIndex(m,c)},function(){return[G(U(i.getOptionGroupLabel(f.optionGroup)),1)]})],16,ki)):ft((x(),_("li",V({key:1,id:t.$id+"_"+i.getOptionIndex(m,c),style:{height:P?P+"px":void 0},class:t.cx("option",{option:f,index:m,getItemOptions:c}),role:"option","aria-label":i.getOptionLabel(f),"aria-selected":i.isSelected(f),"aria-disabled":i.isOptionDisabled(f),"aria-setsize":i.ariaSetSize,"aria-posinset":i.getAriaPosInset(i.getOptionIndex(m,c)),onClick:function(z){return i.onOptionSelect(z,f,i.getOptionIndex(m,c))},onMousedown:function(z){return i.onOptionMouseDown(z,i.getOptionIndex(m,c))},onMousemove:function(z){return i.onOptionMouseMove(z,i.getOptionIndex(m,c))},onTouchend:e[2]||(e[2]=function(H){return i.onOptionTouchEnd()}),onDblclick:function(z){return i.onOptionDblClick(z,f)}},{ref_for:!0},i.getPTOptions(f,c,m,"option"),{"data-p-selected":!t.checkmark&&i.isSelected(f),"data-p-focused":l.focusedOptionIndex===i.getOptionIndex(m,c),"data-p-disabled":i.isOptionDisabled(f)}),[t.checkmark?(x(),_(ke,{key:0},[i.isSelected(f)?(x(),Z(d,V({key:0,class:t.cx("optionCheckIcon")},{ref_for:!0},t.ptm("optionCheckIcon")),null,16,["class"])):(x(),Z(C,V({key:1,class:t.cx("optionBlankIcon")},{ref_for:!0},t.ptm("optionBlankIcon")),null,16,["class"]))],64)):$("",!0),oe(t.$slots,"option",{option:f,selected:i.isSelected(f),index:i.getOptionIndex(m,c)},function(){return[G(U(i.getOptionLabel(f)),1)]})],16,Ci)),[[E]])],64)}),128)),l.filterValue&&(!h||h&&h.length===0)?(x(),_("li",V({key:0,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage")),[oe(t.$slots,"emptyfilter",{},function(){return[G(U(i.emptyFilterMessageText),1)]})],16)):!t.options||t.options&&t.options.length===0?(x(),_("li",V({key:1,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage")),[oe(t.$slots,"empty",{},function(){return[G(U(i.emptyMessageText),1)]})],16)):$("",!0)],16,wi)]}),_:2},[t.$slots.loader?{name:"loader",fn:L(function(A){var w=A.options;return[oe(t.$slots,"loader",{options:w})]}),key:"0"}:void 0]),1040,["items","style","disabled","pt"])],16),oe(t.$slots,"footer",{value:t.d_value,options:i.visibleOptions}),!t.options||t.options&&t.options.length===0?(x(),_("span",V({key:2,role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenEmptyMessage"),{"data-p-hidden-accessible":!0}),U(i.emptyMessageText),17)):$("",!0),S("span",V({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenSelectedMessage"),{"data-p-hidden-accessible":!0}),U(i.selectedMessageText),17),S("span",V({ref:"lastHiddenFocusableElement",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:t.disabled?-1:t.tabindex,onFocus:e[6]||(e[6]=function(){return i.onLastHiddenFocus&&i.onLastHiddenFocus.apply(i,arguments)})},t.ptm("hiddenLastFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16,_i)],16,Oi)}Ne.render=Mi;var Ae,nt;function Li(){if(nt)return Ae;nt=1;var t=function(c){return e(c)&&!n(c)};function e(h){return!!h&&typeof h=="object"}function n(h){var c=Object.prototype.toString.call(h);return c==="[object RegExp]"||c==="[object Date]"||i(h)}var o=typeof Symbol=="function"&&Symbol.for,l=o?Symbol.for("react.element"):60103;function i(h){return h.$$typeof===l}function s(h){return Array.isArray(h)?[]:{}}function r(h,c){return c.clone!==!1&&c.isMergeableObject(h)?w(s(h),h,c):h}function u(h,c,y){return h.concat(c).map(function(P){return r(P,y)})}function p(h,c){if(!c.customMerge)return w;var y=c.customMerge(h);return typeof y=="function"?y:w}function d(h){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(h).filter(function(c){return Object.propertyIsEnumerable.call(h,c)}):[]}function C(h){return Object.keys(h).concat(d(h))}function M(h,c){try{return c in h}catch{return!1}}function E(h,c){return M(h,c)&&!(Object.hasOwnProperty.call(h,c)&&Object.propertyIsEnumerable.call(h,c))}function A(h,c,y){var P={};return y.isMergeableObject(h)&&C(h).forEach(function(f){P[f]=r(h[f],y)}),C(c).forEach(function(f){E(h,f)||(M(h,f)&&y.isMergeableObject(c[f])?P[f]=p(f,y)(h[f],c[f],y):P[f]=r(c[f],y))}),P}function w(h,c,y){y=y||{},y.arrayMerge=y.arrayMerge||u,y.isMergeableObject=y.isMergeableObject||t,y.cloneUnlessOtherwiseSpecified=r;var P=Array.isArray(c),f=Array.isArray(h),m=P===f;return m?P?y.arrayMerge(h,c,y):A(h,c,y):r(c,y)}w.all=function(c,y){if(!Array.isArray(c))throw new Error("first argument should be an array");return c.reduce(function(P,f){return w(P,f,y)},{})};var O=w;return Ae=O,Ae}var Pi=Li();const Vi=Jt(Pi),Te=T({BollingerBands:{main_plot:{bb_upperband:{color:"#008af4",type:"line",fill_to:"bb_lowerband"},bb_lowerband:{color:"#008af4",type:"line"}}},RSI:{subplots:{RSI:{rsi:{color:"#ff8000",type:"line"}}}},MACD:{subplots:{MACD:{macdsignal:{color:"#ff8000",type:"line"},macd:{color:"#1370f4",type:"line"}}}}});function it(t,e){const n=Be(t);if(!e)return n;const o={};for(const i in t.main_plot){const s=e[i]||i;o[s]=t.main_plot[i],o[s].fill_to!==void 0&&(o[s].fill_to=e[o[s].fill_to]||o[s].fill_to)}"main_plot"in t&&(n.main_plot=o);const l={};for(const i in t.subplots){const s={};for(const r in t.subplots[i]){const u=e[r]||r;s[u]=t.subplots[i][r],s[u].fill_to!==void 0&&(s[u].fill_to=e[s[u].fill_to]||s[u].fill_to)}l[i]=s}return"subplots"in t&&(n.subplots=l),n}function Ai(){function t(n){return Te.value[n]||{}}function e(n,o,l={}){const i=t(n);if(!i)return o;const s=it(i,l);return Vi(o,s)}return{plotTemplates:Te,applyPlotTemplate:e,getTemplateContent:t,replaceTemplateColumns:it,plotTemplateNames:D(()=>Object.keys(Te.value))}}const Ti={key:0,class:"pt-1"},Di={key:0,class:"w-full"},$i={key:1},Hi=["for"],Ei={class:"mt-2 flex gap-1 justify-end"},Bi=ae({__name:"PlotFromTemplate",props:Qt({columns:{}},{visible:{type:Boolean},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=en(t,"visible"),{plotTemplateNames:n,applyPlotTemplate:o,getTemplateContent:l}=Ai(),i=Ce();function s(){u.value&&(i.editablePlotConfig={...o(u.value,i.editablePlotConfig,p.value)},e.value=!1)}function r(){d.value=!d.value,p.value=tn(l(u.value)).reduce((C,M)=>(C[M]=M,C),{})}const u=T("");N(()=>e.value,C=>{C&&(u.value="",d.value=!1)});const p=T({}),d=T(!1);return(C,M)=>{const E=Ne,A=ve,w=rt,O=ye,h=mn;return e.value?(x(),_("div",Ti,[a(d)?(x(),_("div",$i,[M[3]||(M[3]=S("h5",{class:"mt-1 text-center text-md mb-1"},"Re-map indicators",-1)),(x(!0),_(ke,null,pt(Object.keys(a(p)),c=>(x(),_("div",{key:c,class:"flex gap-2 align-center"},[S("label",{for:`indicator-${c}`,class:"grow w-full"},U(c),9,Hi),v(A,{id:`indicator-${c}`,modelValue:a(p)[c],"onUpdate:modelValue":y=>a(p)[c]=y,class:"grow w-full",size:"small",options:t.columns},null,8,["id","modelValue","onUpdate:modelValue","options"])]))),128))])):(x(),_("div",Di,[M[2]||(M[2]=S("label",{for:"selectTemplate"},"Select Template",-1)),v(E,{id:"selectTemplate",modelValue:a(u),"onUpdate:modelValue":M[0]||(M[0]=c=>j(u)?u.value=c:null),options:a(n),"select-size":4},null,8,["modelValue","options"])])),S("div",Ei,[v(O,{size:"small",title:"Abort",severity:"secondary",onClick:M[1]||(M[1]=c=>e.value=!1)},{default:L(()=>[v(w)]),_:1}),a(d)?$("",!0):(x(),Z(O,{key:0,disabled:!a(u),size:"small",style:{width:"33%"},title:"Use template",label:" Use Template",severity:"primary",onClick:r},{icon:L(()=>[v(h,{class:"me-1"})]),_:1},8,["disabled"])),a(d)?(x(),Z(O,{key:1,disabled:!a(u),size:"small",style:{width:"33%"},title:"Apply template",severity:"primary",onClick:s},{icon:L(()=>[v(h,{class:"me-1"})]),default:L(()=>[M[4]||(M[4]=G(" Apply Template ",-1))]),_:1},8,["disabled"])):$("",!0)])])):$("",!0)}}}),Ot=ae({__name:"PlotConfigSelect",props:{allowEdit:{type:Boolean,default:!1},editableName:{default:"plot configuration"}},setup(t){const e=Ce();return(n,o)=>{const l=ve,i=vt;return x(),Z(i,{modelValue:a(e).plotConfigName,"onUpdate:modelValue":o[1]||(o[1]=s=>a(e).plotConfigName=s),"allow-edit":t.allowEdit,"allow-add":t.allowEdit,"allow-duplicate":t.allowEdit,"editable-name":"plot configuration",onRename:a(e).renamePlotConfig,onDelete:a(e).deletePlotConfig,onNew:a(e).newPlotConfig,onDuplicate:a(e).duplicatePlotConfig},{default:L(()=>[v(l,{id:"plotConfigSelect",modelValue:a(e).plotConfigName,"onUpdate:modelValue":[o[0]||(o[0]=s=>a(e).plotConfigName=s),a(e).plotConfigChanged],options:a(e).availablePlotConfigNames,class:"w-full text-left",size:"small"},null,8,["modelValue","options","onUpdate:modelValue"])]),_:1},8,["modelValue","allow-edit","allow-add","allow-duplicate","onRename","onDelete","onNew","onDuplicate"])}}}),Fi={key:0},zi={class:"grid grid-cols-2 items-center gap-2 w-full"},Ri={class:"flex flex-row mt-1 gap-1"},Ui={class:"flex flex-row gap-1"},Ki={key:3,class:"w-full ms-1 mt-2"},ji=ae({__name:"PlotConfigurator",props:{columns:{},isVisible:{type:Boolean,default:!1}},setup(t){const e=t,n=Ce(),o=ht(),l=T("default"),i=T(""),s=T(!1),r=T(!1),u=T("main_plot"),p=T(),d=T(!0),C=D(()=>u.value==="main_plot"),M=D(()=>C.value?n.editablePlotConfig.main_plot:n.editablePlotConfig.subplots[u.value]),E=D(()=>["main_plot",...Object.keys(n.editablePlotConfig.subplots)]),A=D(()=>{let I=[];C.value&&(I=Object.keys(n.editablePlotConfig.main_plot));const b=n.editablePlotConfig.subplots[u.value];return b&&(I=Object.keys(b)),I.map(F=>({value:F,text:e.columns.includes(F)?F:`${F} <-- not available in this chart`}))});function w(I){console.log("Adding indicator",I);const b=Object.keys(I)[0];if(!b)return;const F=I[b];C.value?n.editablePlotConfig.main_plot[b]={...F}:n.editablePlotConfig.subplots[u.value][b]={...F},n.editablePlotConfig={...n.editablePlotConfig},s.value=!1}const O=D({get(){if(s.value)return{};if(i.value){const I=M.value?.[i.value];if(I)return{[i.value]:I}}return{}},set(I){Object.keys(I)[0]&&I?w(I):s.value=!1}}),h=D({get(){return JSON.stringify(n.editablePlotConfig,null,2)},set(I){try{p.value=JSON.parse(I),d.value=!0}catch{d.value=!1}}});function c(){C.value?(console.log(`Removing ${i.value} from MainPlot`),delete n.editablePlotConfig.main_plot[i.value]):(console.log(`Removing ${i.value} from ${u.value}`),delete n.editablePlotConfig.subplots[u.value]?.[i.value]),n.editablePlotConfig={...n.editablePlotConfig},i.value=""}function y(){s.value=!s.value,i.value=""}function P(I){n.editablePlotConfig.subplots={...n.editablePlotConfig.subplots,[I]:{}},u.value=I}function f(I){delete n.editablePlotConfig.subplots[I],n.editablePlotConfig={...n.editablePlotConfig},u.value=E.value[E.value.length-1]??"main_plot"}function m(I,b){const F=n.editablePlotConfig.subplots[I];F&&(n.editablePlotConfig.subplots[b]=F),u.value=b,delete n.editablePlotConfig.subplots[I]}function H(){const I=n.customPlotConfigs[n.plotConfigName];I&&(n.editablePlotConfig=Be(I))}function z(){p.value!==void 0&&d.value&&(n.editablePlotConfig=p.value)}async function Y(){if(o.activeBot.isWebserverMode&&!o.activeBot.strategy.strategy){We("No strategy selected, can't load plot config.");return}try{await o.activeBot.getStrategyPlotConfig(),o.activeBot.strategyPlotConfig&&(n.editablePlotConfig=o.activeBot.strategyPlotConfig)}catch{We("Failed to load Plot configuration from Strategy.")}}function B(){n.saveCustomPlotConfig(l.value,n.editablePlotConfig)}function X(I){s.value=!1,I&&(w({[I]:{color:me()}}),i.value=I)}N(u,()=>{i.value=""}),N(()=>n.plotConfigName,()=>{i.value="",l.value=n.plotConfigName}),N(()=>e.isVisible,()=>{e.isVisible?(n.editablePlotConfig=Be(n.plotConfig),n.isEditing=!0,l.value=n.plotConfigName):n.isEditing=!1},{immediate:!0});const J=T(!1),Q=D({get(){return n.editablePlotConfig.options?.showTags??!0},set(I){n.editablePlotConfig.options||(n.editablePlotConfig.options={}),n.editablePlotConfig.options.showTags=I}}),ne=D({get(){return n.editablePlotConfig.options?.markAreaZIndex??1},set(I){n.editablePlotConfig.options||(n.editablePlotConfig.options={}),n.editablePlotConfig.options.markAreaZIndex=I}});return(I,b)=>{const F=Ot,re=nn,pe=mt,ie=gt,fe=Ne,xe=vt,W=ye,Se=xt,_e=Bi,g=fi,R=yt;return t.columns?(x(),_("div",Fi,[b[20]||(b[20]=S("label",{for:"idPlotConfigName"},"Plot config name",-1)),v(F,{"allow-edit":""}),v(re),v(pe,{modelValue:a(Q),"onUpdate:modelValue":b[0]||(b[0]=k=>j(Q)?Q.value=k:null),class:"mb-1"},{default:L(()=>[...b[10]||(b[10]=[G("Show Tags in Tooltips",-1)])]),_:1},8,["modelValue"]),S("div",zi,[b[11]||(b[11]=S("label",null,[G("Mark Area Z-Index "),S("br"),S("small",null,"(defaults to 1 - Candlechart is at Z=2)")],-1)),v(ie,{modelValue:a(ne),"onUpdate:modelValue":b[1]||(b[1]=k=>j(ne)?ne.value=k:null),class:"mb-1",size:"small"},null,8,["modelValue"])]),v(re),b[21]||(b[21]=S("label",{for:"fieldSel",class:"mb"},"Target Plot",-1)),v(xe,{modelValue:a(u),"onUpdate:modelValue":b[3]||(b[3]=k=>j(u)?u.value=k:null),"allow-edit":!a(C),"allow-add":"","editable-name":"plot configuration","align-vertical":"",onNew:P,onDelete:f,onRename:m},{default:L(()=>[v(fe,{id:"fieldSel",modelValue:a(u),"onUpdate:modelValue":b[2]||(b[2]=k=>j(u)?u.value=k:null),options:a(E),size:"small",pt:{listContainer:{class:"h-30"}}},null,8,["modelValue","options"])]),_:1},8,["modelValue","allow-edit"]),v(re),S("div",null,[b[12]||(b[12]=S("label",{for:"selectedIndicators"},"Indicators in this plot",-1)),v(fe,{id:"selectedIndicators",modelValue:a(i),"onUpdate:modelValue":b[4]||(b[4]=k=>j(i)?i.value=k:null),size:"small","empty-message":"No indicators selected","option-label":"text","option-value":"value",disabled:a(s),options:a(A),pt:{listContainer:{class:"h-30"}}},null,8,["modelValue","disabled","options"])]),S("div",Ri,[v(W,{severity:"secondary",title:"Remove indicator to plot",size:"small",disabled:!a(i),class:"col",onClick:c},{default:L(()=>[...b[13]||(b[13]=[G(" Remove indicator ",-1)])]),_:1},8,["disabled"]),v(W,{severity:"secondary",title:"Load indicator config from template",size:"small",onClick:b[5]||(b[5]=k=>J.value=!a(J))},{default:L(()=>[...b[14]||(b[14]=[G(" Indicator from template ",-1)])]),_:1}),v(W,{severity:"primary",title:"Add indicator to plot",size:"small",class:"col",disabled:a(s),onClick:y},{default:L(()=>[...b[15]||(b[15]=[G(" Add new indicator ",-1)])]),_:1},8,["disabled"])]),a(s)?(x(),Z(Se,{key:0,columns:t.columns,class:"mt-1",label:"Select indicator to add",onIndicatorSelected:X},null,8,["columns"])):$("",!0),v(_e,{visible:a(J),"onUpdate:visible":b[6]||(b[6]=k=>j(J)?J.value=k:null),columns:t.columns},null,8,["visible","columns"]),a(i)&&!a(J)?(x(),Z(g,{key:1,modelValue:a(O),"onUpdate:modelValue":b[7]||(b[7]=k=>j(O)?O.value=k:null),class:"mt-1",columns:t.columns},null,8,["modelValue","columns"])):$("",!0),v(re),S("div",Ui,[v(W,{severity:"secondary",size:"small",disabled:a(s),title:"Reset to last saved configuration",onClick:H},{default:L(()=>[...b[16]||(b[16]=[G("Reset",-1)])]),_:1},8,["disabled"]),v(W,{disabled:a(o).activeBot.isWebserverMode&&!a(o).activeBot.botFeatures.plotConfigFromServer||!a(o).activeBot.isBotOnline||a(s),severity:"secondary",size:"small",onClick:Y},{default:L(()=>[...b[17]||(b[17]=[G(" From strategy ",-1)])]),_:1},8,["disabled"]),v(W,{id:"showButton",severity:"secondary",size:"small",disabled:a(s),title:"Show configuration for easy transfer to a strategy",onClick:b[8]||(b[8]=k=>r.value=!a(r))},{default:L(()=>[G(U(a(r)?"Hide":"Show"),1)]),_:1},8,["disabled"]),v(W,{severity:"primary",size:"small","data-toggle":"tooltip",disabled:a(s),title:"Save configuration",onClick:B},{default:L(()=>[...b[18]||(b[18]=[G("Save",-1)])]),_:1},8,["disabled"])]),a(r)?(x(),Z(W,{key:2,class:"ms-1 mt-1",severity:"secondary",size:"small",title:"Load configuration from text box below",onClick:z},{default:L(()=>[...b[19]||(b[19]=[G("Load from String",-1)])]),_:1})):$("",!0),a(r)?(x(),_("div",Ki,[v(R,{id:"TextArea",modelValue:a(h),"onUpdate:modelValue":b[9]||(b[9]=k=>j(h)?h.value=k:null),class:"w-full min-h-[250px]",size:"small",state:a(d)},null,8,["modelValue","state"])])):$("",!0)])):$("",!0)}}}),Ni=je(ji,[["__scopeId","data-v-e685438f"]]);function Gi(t,e,n,o){const l=t.indexOf(n),i=t.indexOf(o),s=l>0&&i>0;return s&&t.push(`${n}-${o}`),e.map(r=>{const u=r.slice();if(s){const p=u===null||u[i]===null||u[l]===null?null:u[i]-u[l];u.push(p)}return u})}function Zi(t){const e=[];return"main_plot"in t&&Object.entries(t.main_plot).forEach(([n,o])=>{o.fill_to&&e.push([n,o.fill_to])}),"subplots"in t&&Object.values(t.subplots).forEach(n=>{Object.entries(n).forEach(([o,l])=>{l.fill_to&&e.push([o,l.fill_to])})}),e}const Xi=2,qi=3,It=4;function se(t,e,n=qi){const o=e%t;let l=n===Xi;return n===It&&(l=o>t/2),e-o+(l?t:0)}function Yi(t,e,n){const o=on("Shift",{events:["keydown","keyup"]}),l=D(()=>e.value==="dark"?"white":"black"),i=T({x:0,y:0}),s=144,r=T(!0),u=T(!1),p=T(!1),d=35,C=170;function M(c){return se(n.value,c,It)}function E(c){r.value&&!p.value&&h(c.offsetX,c.offsetY)}function A(c){if(u.value)p.value?(O(),p.value=!1,t.value?.chart?.getZr().off("mousemove",E),t.value?.chart?.getZr().off("mousedown",A)):p.value=!0;else{const y=t.value?.convertFromPixel({seriesIndex:0},[c.offsetX,c.offsetY])??[0,0];y[0]=M(Number(y[0]));const P=t.value?.convertToPixel({seriesIndex:0},y)??[0,0];i.value={x:P[0],y:P[1]},t.value?.chart?.getZr().on("mousemove",E),w()}}function w(){u.value=!0,t.value?.setOption({dataZoom:[{disabled:!0}],graphic:[{type:"rect",shape:{x:i.value.x,width:0,y:i.value.y,height:0},style:{fill:l.value,opacity:.1}},{type:"rect",z:5,shape:{x:i.value.x,width:C,y:i.value.y,height:d,r:5},style:{fill:"#002fff",opacity:.8},textContent:{z:10,style:{text:"0 bars - 0%",font:"14px sans-serif",fill:"white"}},textConfig:{position:"inside"}}]})}function O(){u.value=!1,t.value?.setOption({dataZoom:[{disabled:!1}],graphic:[{$action:"remove"},{$action:"remove"}]})}function h(c,y){const P=t.value?.convertFromPixel({seriesIndex:0},[i.value.x,i.value.y])??[0,0],f=t.value?.convertFromPixel({seriesIndex:0},[c,y])??[0,0],m=Number(P[1]),H=Number(f[1]),z=M(Number(P[0])),Y=M(Number(f[0])),B=Math.abs(z-Y),X=t.value?.convertToPixel({seriesIndex:0},[Y,0])[0]??0,J=ln(B,{units:["d","h","m"]}),Q=Math.abs((m-H)/m*100).toFixed(2);t.value?.setOption({graphic:[{shape:{width:X>i.value.x?-1*(i.value.x-X):X-i.value.x,height:y>i.value.y?-1*(i.value.y-y):y-i.value.y}},{shape:{x:i.value.x+(X-i.value.x)/2-C/2,y:y>i.value.y?y-(d+5):y+9},textContent:{style:{textAlign:c<i.value.x?"left":"right",text:`${B/n.value} bars (${m<H?Q:"-"+Q}%) 
 ${J}`}}}]}),r.value=!1,setTimeout(()=>{r.value=!0},1e3/s)}N(()=>o.value,()=>{o.value&&!u.value&&t.value?.chart?.getZr().on("mousedown",A)})}function Wi(t,e){const n=t.indexOf("open"),o=t.indexOf("close"),l=t.indexOf("high"),i=t.indexOf("low");let s;return e.map((r,u)=>{const p=r.slice(),d=p[n]??0,C=p[o]??0,M=p[l]??0,E=p[i]??0,A=u===0?(d+C)/2:((s[n]??0)+(s[o]??0))/2,w=(d+M+E+C)/4,O=Math.max(M,d,C),h=Math.min(E,d,C);return p[n]=A,p[o]=w,p[l]=O,p[i]=h,s=p.slice(),p})}function Ji(t){if(!t)return{baseCurrency:"",quoteCurrency:""};const[e,n]=t.split("/");if(n!==void 0&&e!==void 0){const o=n.split(":");return{baseCurrency:e,quoteCurrency:o[0]||n}}return{baseCurrency:n??"",quoteCurrency:e??""}}function wt(t,e){return`${t.ft_order_side==="buy"?"+":"-"}${Fe("cost"in t?t.cost:t.amount*t.safe_price,e)}`}function ot(t,e,n,o){let l=`${t.is_short?"Short":"Long"} ${n}
  ${bt(t.profit_ratio)} ${t.profit_abs?"("+Fe(t.profit_abs,o)+")":""}
  ${wt(e,o)}
  Enter-tag: ${t.enter_tag??""}
  Order Price: ${Fe(e.safe_price,o)}`;return l+=`${"ft_order_tag"in e&&e.ft_order_tag&&t.enter_tag!=e.ft_order_tag?`
Order-Tag: `+e.ft_order_tag:""}`,l+=`${t.exit_reason?`
Exit-Tag: `+t.exit_reason:""}`,l}function Qi(t,e,n){let o=`${t.is_short?"Short":"Long"} adjustment
  ${wt(e,n)}
  Enter-tag: ${t.enter_tag??""}`;return o+=`${"ft_order_tag"in e&&e.ft_order_tag?`
Order-Tag: `+e.ft_order_tag:""}`,o}const eo="path://m 52.444161,104.1909 8.386653,25.34314 8.386651,25.34313 -16.731501,0.0422 -16.731501,0.0422 8.344848,-25.38539 z m 0.08656,-48.368126 8.386652,25.343139 8.386652,25.343137 -16.731501,0.0422 -16.731502,0.0422 8.344848,-25.385389 z",lt="path://m 102.20764,19.885384 h 24.1454 v 41.928829 h -24.1454 z m 12.17344,36.423813 8.38665,25.343139 8.38666,25.343134 -16.7315,0.0422 -16.731507,0.0422 8.344847,-25.385386 z",De="#AD00FF",$e="#0066FF";function to(t,e){const n=[],o=t.data_stop_ts+t.timeframe_ms;for(const l of e){const i=l.open_fill_timestamp??l.open_timestamp;if((se(t.timeframe_ms??0,l.open_timestamp)<=o||!l.close_timestamp||l.close_timestamp&&l.close_timestamp>=t.data_start_ts)&&l.orders)for(const[s,r]of l.orders.entries()){const u=r.order_filled_timestamp??("order_timestamp"in r?r.order_timestamp:l.open_timestamp),{quoteCurrency:p}=Ji(l.quote_currency??l.pair??"");u&&se(t.timeframe_ms??0,u)<=o&&u>t.data_start_ts&&(s===0?n.push([se(t.timeframe_ms??0,i),r.safe_price,lt,r.ft_order_side=="sell"?180:0,l.is_short?De:$e,(l.is_short?"Short":"Long")+(r.order_filled_timestamp?"":" (open)"),ot(l,r,"entry",p)]):s===l.orders.length-1&&l.close_timestamp?se(t.timeframe_ms??0,l.close_timestamp)<=o&&l.close_timestamp>t.data_start_ts&&l.is_open===!1&&n.push([se(t.timeframe_ms??0,l.close_timestamp),r.safe_price,lt,l.is_short?0:180,l.is_short?De:$e,bt(l.profit_ratio,2),ot(l,r,"exit",p)]):(r.ft_order_side!=="stoploss"||"filled"in r&&(r.filled??0)>0)&&n.push([se(t.timeframe_ms??0,u),r.safe_price,eo,r.ft_order_side=="sell"?180:0,l.is_short?De:$e,"",Qi(l,r,p)]))}}return{tradeData:n}}function no(t,e,n,o){const{tradeData:l}=to(n,o),i=o.find(r=>r.is_open),s={name:t,type:"scatter",xAxisIndex:0,yAxisIndex:0,encode:{x:0,y:1,label:5,tooltip:6},label:{show:!0,fontSize:12,backgroundColor:e!=="dark"?"#fff":"#000",padding:2,color:e==="dark"?"#fff":"#000",rotate:75,offset:[10,0],align:"left"},itemStyle:{color:r=>r.data?r.data[4]:"#000",opacity:.9},symbol:r=>r[2],symbolRotate:r=>r[3],symbolSize:13,data:l};if(i){const r=n.timeframe_ms*10;s.markLine={symbol:"none",label:{show:!0,position:"middle"},data:[[{name:"Stoploss",yAxis:i.stop_loss_abs,lineStyle:{color:"#ff0000AA",type:"solid"},xAxis:n.data_stop_ts-r>i.open_timestamp?i.open_timestamp:n.data_stop_ts-r},{lineStyle:{color:"#ff0000AA",type:"solid"},yAxis:i.stop_loss_abs,xAxis:i.close_timestamp??n.data_stop_ts+n.timeframe_ms}]]}}return s}function io(t,e,n){if(!t.annotations||!e)return{};const o={label:{position:"insideTop"},z:n??1,data:t.annotations.filter(i=>i.type=="area").map(i=>[{z2:i.z_index??1,xAxis:i.start,yAxis:i.y_start,itemStyle:{color:i.color},label:{formatter:i.label}},{z2:i.z_index??1,xAxis:i.end,yAxis:i.y_end}])},l={label:{position:"middle"},symbol:["none","none"],z:n??1,data:t.annotations.filter(i=>i.type=="line").map(i=>[{name:i.label,xAxis:i.start,yAxis:i.y_start,lineStyle:{color:i.color,width:i.width??1,type:i.line_style??"solid"},z2:i.z_index??1},{xAxis:i.end,yAxis:i.y_end,z2:i.z_index??1}])};return{markArea:o,markLine:l}}function oo(t,e,n){if(!(!t.annotations||!e))return{type:"scatter",symbol:"none",xAxisIndex:0,...io(t,e,n)}}function Re(t,e,n,o,l=0){const i={name:n,type:o.type||"line",xAxisIndex:l,yAxisIndex:l,itemStyle:{color:o.color||me()},encode:{x:t,y:e},showSymbol:!1};return o.type===ee.scatter&&(i.symbolSize=o.scatterSymbolSize??3,i.emphasis={disabled:!0}),i}function st(t,e,n,o,l=0){const i={type:ee.line},s=Re(t,e,n,i,l),r={stack:n,stackStrategy:"all",lineStyle:{opacity:0},showSymbol:!1,areaStyle:{color:o.color,opacity:.1},tooltip:{show:!1}};return Object.assign(s,r),s}const lo={class:"h-full w-full"},He=55,he=8,Ee=!1,so="#00ff26",ao="#00ff26",ro="#faba25",uo="#faba25",co=ae({__name:"CandleChart",props:{trades:{},dataset:{},heikinAshi:{type:Boolean},showMarkArea:{type:Boolean},useUTC:{type:Boolean},plotConfig:{},theme:{},sliderPosition:{},colorUp:{},colorDown:{},labelSide:{},startCandleCount:{}},setup(t){bn([vn,wn,yn,kn,Cn,xn,_n,Sn,Mn,On,Ln,Pn,Vn,An,Tn,Dn,$n,Hn,In,En]);const e=t,n=D(()=>e.labelSide==="left"),o=n.value?"5.5%":"1%",l=n.value?"1%":"5.5%",i=e.colorUp,s=e.colorUp,r=e.colorDown,u=e.colorDown,p=T(),d=T({}),C=D(()=>e.dataset?e.dataset.strategy:""),M=D(()=>e.dataset?e.dataset.pair:""),E=D(()=>e.dataset?e.dataset.timeframe:""),A=D(()=>e.dataset!==null&&typeof e.dataset=="object"),w=D(()=>e.trades.filter(f=>f.pair===M.value)),O=D(()=>`${C.value} - ${M.value} - ${E.value}`),h=D(()=>Zi(e.plotConfig));Yi(p,Je(()=>e.theme),Je(()=>e.dataset.timeframe_ms));function c(f=!1){if(!A.value)return;d.value?.title&&(d.value.title[0].text=O.value);const m=e.dataset.columns.slice(),H=m.findIndex(g=>g==="__date_ts"),z=m.findIndex(g=>g==="open"),Y=m.findIndex(g=>g==="high"),B=m.findIndex(g=>g==="low"),X=m.findIndex(g=>g==="close"),J=m.findIndex(g=>g==="volume"),Q=m.findIndex(g=>g==="enter_tag"),ne=m.findIndex(g=>g==="exit_tag"),I=m.findIndex(g=>g==="_buy_signal_close"||g==="_enter_long_signal_close"),b=m.findIndex(g=>g==="_sell_signal_close"||g==="_exit_long_signal_close"),F=m.findIndex(g=>g==="_enter_short_signal_close"),re=m.findIndex(g=>g==="_exit_short_signal_close"),pe="subplots"in e.plotConfig?Object.keys(e.plotConfig.subplots).length+1:1;if(Array.isArray(d.value?.dataZoom))if(f){const g=(1-(e.startCandleCount+2)/e.dataset.length)*100;d.value.dataZoom.forEach((R,k)=>{d.value&&d.value.dataZoom&&(d.value.dataZoom[k].start=g)})}else d.value.dataZoom.forEach((g,R)=>{d.value&&d.value.dataZoom&&(delete d.value.dataZoom[R].start,delete d.value.dataZoom[R].end)});let ie=e.heikinAshi?Wi(m,e.dataset.data):e.dataset.data.slice();h.value.forEach(([g,R])=>{g&&R&&(ie=Gi(m,ie,g,R))});const fe=5,xe=ie[ie.length-1]?.[H];if(xe){const g=Array(fe);g[H]=xe+e.dataset.timeframe_ms*fe,ie.push(g)}const W={dataset:{source:ie},grid:[{left:o,right:l,bottom:`${pe*he+2}%`},{left:o,right:l,bottom:`${pe*he}%`,height:`${he}%`}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:i,color0:r,borderColor:s,borderColor0:u},encode:{x:H,y:[z,X,B,Y]}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:H,y:J}}]};if(Array.isArray(W.series)){const g=oo(e.dataset,e.showMarkArea,e.plotConfig.options?.markAreaZIndex);g&&W.series.push(g);const R=[{colData:I,name:"Entry",symbol:"triangle",symbolSize:10,color:so,tooltipPrefix:"Long entry",colTooltip:Q},{colData:b,name:"Exit",symbol:"diamond",symbolSize:8,color:ro,tooltipPrefix:"Long exit",colTooltip:ne},{colData:F,name:"Entry",symbol:"triangle",symbolSize:10,symbolRotate:180,color:ao,tooltipPrefix:"Short entry",colTooltip:Q},{colData:re,name:"Exit",symbol:"pin",symbolSize:8,color:uo,tooltipPrefix:"Short exit",colTooltip:ne}];for(const k of R)k.colData>=0&&W.series.push({name:k.name,type:"scatter",symbol:k.symbol,symbolSize:k.symbolSize,symbolRotate:k.symbolRotate??0,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:k.color},tooltip:{valueFormatter:K=>{if(Array.isArray(K)){if(K.length>0&&K[0]){const te=(Array.isArray(K[1])?K[1][k.colTooltip]?.toString():K[1]?.toString()).substring(0,100);return`${k.tooltipPrefix} ${K[0]} ${te?`(${te})`:""}`}return""}return K?`${k.tooltipPrefix} ${K}`:""}},encode:{x:H,y:k.colData,tooltip:k.colTooltip>=0?[k.colData,k.colTooltip]:[k.colData]}})}if(Object.assign(d.value,W),"main_plot"in e.plotConfig&&Object.entries(e.plotConfig.main_plot).forEach(([g,R])=>{const k=m.findIndex(K=>K===g);if(k>0){if(!Array.isArray(d.value?.legend)&&d.value?.legend?.data&&d.value.legend.data.push(g),Array.isArray(d.value?.series)){if(d.value?.series.push(Re(H,k,g,R)),R.fill_to){const K=`${g}-${R.fill_to}`,q=m.findIndex(Me=>Me===K),te={color:R.color,type:ee.line},Oe=st(H,q,g,te,0),de=d.value.series[d.value.series.length-1];de&&(de.stack=g),d.value.series.push(Oe)}d.value?.series.splice(d.value?.series.length-1,0)}}else console.log(`element ${g} for main plot not found in columns.`)}),"subplots"in e.plotConfig){let g=2;Object.entries(e.plotConfig.subplots).forEach(([R,k])=>{const K=g;Array.isArray(d.value.yAxis)&&d.value.yAxis.length<=g&&d.value.yAxis.push({scale:!0,gridIndex:K,name:R,position:e.labelSide,nameLocation:"middle",nameGap:He,axisLabel:{show:!0,hideOverlap:!0,overflow:"truncate"},axisLine:{show:Ee},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(d.value.xAxis)&&d.value.xAxis.length<=g&&d.value.xAxis.push({type:"time",gridIndex:K,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(d.value.dataZoom)&&d.value.dataZoom.forEach(q=>q.xAxisIndex&&Array.isArray(q.xAxisIndex)?q.xAxisIndex.push(g):null),d.value.grid&&Array.isArray(d.value.grid)&&d.value.grid.push({left:o,right:l,bottom:`${(pe-g+1)*he}%`,height:`${he}%`}),Object.entries(k).forEach(([q,te])=>{const Oe=m.findIndex(de=>de===q);if(Oe>0){if(!Array.isArray(d.value.legend)&&d.value.legend?.data&&d.value.legend.data.push(q),d.value.series&&Array.isArray(d.value.series)){if(d.value.series.push(Re(H,Oe,q,te,g)),te.fill_to){const de=`${q}-${te.fill_to}`,Me=m.findIndex(_t=>_t===de),kt={color:te.color,type:ee.line},Ct=st(H,Me,q,kt,g),Ge=d.value.series[d.value.series.length-1];Ge&&(Ge.stack=q),d.value.series.push(Ct)}d.value?.series.splice(d.value?.series.length-1,0)}}else console.log(`element ${q} was not found in the columns.`)}),g+=1})}if(Array.isArray(d.value.grid)){const g=d.value.grid[d.value.grid.length-1];g&&(g.bottom="50px",delete g.top)}const Se="Trades";!Array.isArray(d.value.legend)&&d.value.legend?.data&&d.value.legend.data.splice(4,0,Se);const _e=no(Se,e.theme,e.dataset,w.value);Array.isArray(d.value.series)&&d.value.series.push(_e),p.value?.setOption(d.value,{replaceMerge:["series","grid","yAxis","xAxis","legend"],notMerge:f})}function y(){p.value?.setOption({},{notMerge:!0}),d.value={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:e.useUTC,animation:!1,legend:{data:["Candles","Volume","Entry","Exit"],right:"1%",top:0,type:"scroll",pageTextStyle:{color:e.theme==="dark"?"#dedede":"#333"},pageIconColor:e.theme==="dark"?"#aaa":"#2f4554",pageIconInactiveColor:e.theme==="dark"?"#2f4554":"#aaa"},tooltip:{show:!0,trigger:"axis",renderMode:"richText",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position(f,m,H,z,Y){const B={top:60},X=f[0]<Y.viewSize[0]/2;return B[["left","right"][+X]]=X?5:60,B}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,max:f=>Qe(f.max+(f.max-f.min)*.02),min:f=>Qe(f.min-(f.max-f.min)*.04),name:" ",nameLocation:"middle",nameGap:He,axisLine:{show:Ee},axisLabel:{hideOverlap:!0,overflow:"truncate"},position:e.labelSide},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",position:e.labelSide,nameGap:He,axisLabel:{show:!1},axisLine:{show:Ee},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{xAxisIndex:[0,1],bottom:10,start:80,end:100,...Bn}]},console.log("Initialized"),c(!0)}function P(){if(!e.sliderPosition)return;const f=e.sliderPosition.startValue-e.dataset.timeframe_ms*40,m=e.sliderPosition.endValue?e.sliderPosition.endValue+e.dataset.timeframe_ms*40:e.sliderPosition.startValue+e.dataset.timeframe_ms*80;p.value&&p.value.dispatchAction({type:"dataZoom",dataZoomIndex:0,startValue:f,endValue:m})}return Ke(()=>{y()}),N([()=>e.useUTC,()=>e.theme,()=>e.plotConfig],()=>y()),N([()=>e.dataset,()=>e.heikinAshi,()=>e.showMarkArea],()=>c()),N(()=>e.sliderPosition,()=>P()),(f,m)=>(x(),_("div",lo,[a(A)?(x(),Z(a(gn),{key:0,ref_key:"candleChart",ref:p,theme:t.theme,autoresize:"","manual-update":""},null,8,["theme"])):$("",!0)]))}}),po=je(co,[["__scopeId","data-v-1e045e47"]]),fo={class:"flex h-full"},ho={class:"flex-fill w-full flex-col align-items-stretch flex h-full"},mo={class:"flex me-0"},bo={class:"ms-1 md:ms-2 flex flex-wrap md:flex-nowrap items-center gap-1"},go={class:"md:ms-2 text-nowrap"},vo={class:"flex flex-col"},yo={class:"flex flex-row flex-wrap"},xo={key:0,class:"ms-2 text-sm text-nowrap",title:"Long entry signals"},So={key:1,class:"ms-2 text-sm text-nowrap",title:"Long exit signals"},Oo={class:"flex flex-row flex-wrap"},Io={key:0,class:"ms-2 text-sm text-nowrap"},wo={key:1,class:"ms-2 text-sm text-nowrap"},ko={class:"ms-auto flex items-center gap-2"},Co={class:"me-0 md:me-1"},_o={class:"h-full flex"},Mo={class:"min-w-0 w-full flex-1"},Lo={key:1,class:"m-auto"},Po={key:1,class:"text-lg"},Vo={key:2},Ao={key:0,class:"grow border rounded-md ps-1 border-surface-300 dark:border-surface-700 max-w-110"},To=ae({__name:"CandleChartContainer",props:{trades:{default:()=>[]},availablePairs:{},timeframe:{},historicView:{type:Boolean,default:!1},reloadDataOnSwitch:{type:Boolean,default:!1},plotConfigModal:{type:Boolean,default:!0},strategy:{default:""},sliderPosition:{default:void 0}},emits:["refreshData"],setup(t,{emit:e}){const n=t,o=e,l=sn(),i=an(),s=ht(),r=Ce(),u=T(),p=D(()=>n.historicView?s.activeBot.history[`${s.activeBot.plotPair}__${n.timeframe}`]?.data:s.activeBot.candleData[`${s.activeBot.plotPair}__${n.timeframe}`]?.data),d=D(()=>n.strategy||p.value?.strategy||""),C=D(()=>p.value?p.value.all_columns??p.value.columns:[]),M=D(()=>p.value?p.value.columns??p.value.all_columns:[]),E=D(()=>p.value&&p.value.data.length>0),A=D(()=>n.historicView?s.activeBot.historyStatus===ce.loading:s.activeBot.candleDataStatus===ce.loading),w=D(()=>{switch(n.historicView?s.activeBot.historyStatus:s.activeBot.candleDataStatus){case ce.not_loaded:return"Not loaded yet.";case ce.loading:return"Loading...";case ce.success:return"No data available";case ce.error:return"Failed to load data";default:return"Unknown"}}),O=T(!1);function h(){n.plotConfigModal?O.value=!O.value:u.value=!u.value}function c(){o("refreshData",s.activeBot.plotPair,r.usedColumns)}function y(){E.value||c()}function P(){const[f]=n.availablePairs;f&&(s.activeBot.plotPair=f)}return N(()=>n.availablePairs,()=>{n.availablePairs.find(f=>f===s.activeBot.plotPair)||(P(),c())}),N(()=>s.activeBot.selectedPair,()=>{s.activeBot.plotPair=s.activeBot.selectedPair}),N(()=>s.activeBot.plotPair,()=>{n.historicView?n.reloadDataOnSwitch&&y():c()}),N(()=>r.plotConfig,()=>{const f=r.usedColumns.some(m=>C.value.includes(m)&&!M.value.includes(m));l.useReducedPairCalls&&f&&c()}),N(()=>n.timeframe,()=>{y()}),Ke(()=>{u.value=n.plotConfigModal,s.activeBot.selectedPair?s.activeBot.plotPair=s.activeBot.selectedPair:n.availablePairs.length>0&&P(),r.plotConfigChanged(),n.historicView||y()}),(f,m)=>{const H=ve,z=rn,Y=ye,B=hn,X=mt,J=Ot,Q=dn,ne=po,I=Ni,b=cn;return x(),_("div",fo,[S("div",ho,[S("div",mo,[S("div",bo,[S("span",go,U(a(d))+" | "+U(t.timeframe||""),1),v(H,{modelValue:a(s).activeBot.plotPair,"onUpdate:modelValue":m[0]||(m[0]=F=>a(s).activeBot.plotPair=F),class:"md:ms-2",options:t.availablePairs,size:"small",clearable:!1,onInput:c},null,8,["modelValue","options"]),v(Y,{title:"Refresh chart",severity:"secondary",disabled:!a(s).activeBot.plotPair||a(A),size:"small",onClick:c},{default:L(()=>[v(z)]),_:1},8,["disabled"]),a(A)?(x(),Z(B,{key:0,class:"w-8 h-8","stroke-width":"8",small:"",label:"Spinning"})):$("",!0),S("div",vo,[S("div",yo,[a(p)?(x(),_("small",xo,"Long entries: "+U(a(p).enter_long_signals||a(p).buy_signals),1)):$("",!0),a(p)?(x(),_("small",So,"Long exit: "+U(a(p).exit_long_signals||a(p).sell_signals),1)):$("",!0)]),S("div",Oo,[a(p)&&a(p).enter_short_signals?(x(),_("small",Io,"Short entries: "+U(a(p).enter_short_signals),1)):$("",!0),a(p)&&a(p).exit_short_signals?(x(),_("small",wo,"Short exits: "+U(a(p).exit_short_signals),1)):$("",!0)])])]),S("div",ko,[v(X,{modelValue:a(l).showMarkArea,"onUpdate:modelValue":m[1]||(m[1]=F=>a(l).showMarkArea=F)},{default:L(()=>[...m[4]||(m[4]=[S("span",{class:"text-nowrap"},"Show Chart Areas",-1)])]),_:1},8,["modelValue"]),v(X,{modelValue:a(l).useHeikinAshiCandles,"onUpdate:modelValue":m[2]||(m[2]=F=>a(l).useHeikinAshiCandles=F)},{default:L(()=>[...m[5]||(m[5]=[S("span",{class:"text-nowrap"},"Heikin Ashi",-1)])]),_:1},8,["modelValue"]),v(J),S("div",Co,[v(Y,{size:"small",title:"Plot configurator",severity:"secondary",onClick:h},{icon:L(()=>[v(Q,{width:"12",height:"12"})]),_:1})])])]),S("div",_o,[S("div",Mo,[a(E)?(x(),Z(ne,{key:0,dataset:a(p),trades:t.trades,"plot-config":a(r).plotConfig,"heikin-ashi":a(l).useHeikinAshiCandles,"show-mark-area":a(l).showMarkArea,"use-u-t-c":a(l).timezone==="UTC",theme:a(l).chartTheme,"slider-position":t.sliderPosition,"color-up":a(i).colorUp,"color-down":a(i).colorDown,"start-candle-count":a(l).chartDefaultCandleCount,"label-side":a(l).chartLabelSide},null,8,["dataset","trades","plot-config","heikin-ashi","show-mark-area","use-u-t-c","theme","slider-position","color-up","color-down","start-candle-count","label-side"])):(x(),_("div",Lo,[a(A)?(x(),Z(B,{key:0,class:"w-5 h-5",label:"Spinning"})):(x(),_("div",Po,U(a(w)),1)),a(s).activeBot.historyTakesLonger?(x(),_("p",Vo," This is taking longer than expected ... Hold on ... ")):$("",!0)]))]),v(ut,{name:"fade"},{default:L(()=>[t.plotConfigModal?$("",!0):ft((x(),_("div",Ao,[v(I,{columns:a(C),"is-visible":a(u)??!1},null,8,["columns","is-visible"])],512)),[[un,a(u)]])]),_:1})])]),t.plotConfigModal?(x(),Z(b,{key:0,id:"plotConfiguratorModal",visible:a(O),"onUpdate:visible":m[3]||(m[3]=F=>j(O)?O.value=F:null),header:"Plot Configurator","ok-only":"","hide-backdrop":""},{default:L(()=>[v(I,{"is-visible":a(O),columns:a(C)},null,8,["is-visible","columns"])]),_:1},8,["visible"])):$("",!0)])}}}),zo=je(To,[["__scopeId","data-v-78534f44"]]);export{zo as _,yt as s};
//# sourceMappingURL=CandleChartContainer-IwOvXMbF.js.map
